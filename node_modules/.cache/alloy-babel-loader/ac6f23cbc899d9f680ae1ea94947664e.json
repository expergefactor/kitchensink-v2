{"remainingRequest":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js??ref--4-2!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js","dependencies":[{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBjbGFzcyBBbGxveQogKiBUb3AtbGV2ZWwgbW9kdWxlIGZvciBBbGxveSBmdW5jdGlvbnMuCiAqCiAqIEFsbG95IGlzIGFuIGFwcGxpY2F0aW9uIGZyYW1ld29yayBidWlsdCBvbiB0b3Agb2YgdGhlIFRpdGFuaXVtIFNESyBkZXNpZ25lZCB0byBoZWxwIHJhcGlkbHkKICogZGV2ZWxvcCBoaWdoIHF1YWxpdHkgYXBwbGljYXRpb25zIGFuZCByZWR1Y2UgbWFpbnRlbmFuY2UuCiAqCiAqIEFsbG95IHVzZXMgdGhlIG1vZGVsLXZpZXctY29udHJvbGxlciBhcmNoaXRlY3R1cmUgdG8gc2VwYXJhdGUgdGhlIGFwcGxpY2F0aW9uIGludG8gdGhyZWUKICogY29tcG9uZW50czoKICoKICogICogKipNb2RlbHMqKiBwcm92aWRlIHRoZSBkYXRhIG9mIHRoZSBhcHBsaWNhdGlvbi4gQWxsb3kgdXRpbGl6ZXMgKipCYWNrYm9uZSBNb2RlbCBhbmQgQ29sbGVjdGlvbioqCiAqICAgICBvYmplY3RzIGZvciB0aGlzIGZ1bmN0aW9uYWxpdHkuCiAqCiAqICAqICoqVmlld3MqKiBwcm92aWRlIHRoZSBVSSBjb21wb25lbnRzIHRvIGludGVyYWN0IHdpdGggdGhlIGFwcGxpY2F0aW9uLCB3cml0dGVuIHVzaW5nICoqWE1MIG1hcmt1cCoqCiAqICAgIGFuZCAqKlRpdGFuaXVtIFN0eWxlc2hlZXRzIChUU1MpKiosIHdoaWNoIGFic3RyYWN0cyB0aGUgVUkgY29tcG9uZW50cyBvZiB0aGUgVGl0YW5pdW0gQVBJLgogKgogKiAgKiAqKkNvbnRyb2xsZXJzKiogcHJvdmlkZSB0aGUgZ2x1ZSBsYXllciBiZXR3ZWVuIHRoZSBNb2RlbCBhbmQgVmlldyBjb21wb25lbnRzIGFzIHdlbGwgYXMKICogICAgYWRkaXRpb25hbCBhcHBsaWNhdGlvbiBsb2dpYyB1c2luZyB0aGUgKipBbGxveSBBUEkqKiBhbmQgKipUaXRhbml1bSBBUEkqKi4KICoKICogVGhlIEFQSSBkb2N1bWVudGF0aW9uIHByb3ZpZGVkIGhlcmUgaXMgdXNlZCB3aXRoIEFsbG95IENvbnRyb2xsZXJzIGFuZCBXaWRnZXQgQ29udHJvbGxlcnMgdG8KICogaW50ZXJhY3Qgd2l0aCB0aGUgVmlldyBhbmQgTW9kZWwgY29tcG9uZW50cyBvZiB0aGUgYXBwbGljYXRpb24gb3Igd2lkZ2V0LgogKgogKiBGb3IgZ3VpZGVzIG9uIHVzaW5nIEFsbG95LCBzZWUKICogW0FsbG95IEZyYW1ld29ya10oaHR0cDovL2RvY3MuYXBwY2VsZXJhdG9yLmNvbS9wbGF0Zm9ybS9sYXRlc3QvIyEvZ3VpZGUvQWxsb3lfRnJhbWV3b3JrKS4KICovCnZhciBfID0gcmVxdWlyZSgnL2FsbG95L3VuZGVyc2NvcmUnKS5fLAogICAgQmFja2JvbmUgPSByZXF1aXJlKCcvYWxsb3kvYmFja2JvbmUnKSwKICAgIENPTlNUID0gcmVxdWlyZSgnL2FsbG95L2NvbnN0YW50cycpOwoKZXhwb3J0cy52ZXJzaW9uID0gQUxMT1lfVkVSU0lPTjsKZXhwb3J0cy5fID0gXzsKZXhwb3J0cy5CYWNrYm9uZSA9IEJhY2tib25lOwp2YXIgREVGQVVMVF9XSURHRVQgPSAnd2lkZ2V0JzsKdmFyIE1XMzIwX0NIRUNLID0gT1NfTU9CSUxFV0VCOwp2YXIgSURFTlRJVFlfVFJBTlNGT1JNID0gZmFsc2UgPyBUaS5VSS5jcmVhdGVNYXRyaXgyRCA/IFRpLlVJLmNyZWF0ZU1hdHJpeDJEKCkgOiBUaS5VSS5jcmVhdGUyRE1hdHJpeCgpIDogdW5kZWZpbmVkOwp2YXIgUkVTRVQgPSB7CiAgYm90dG9tOiBudWxsLAogIGxlZnQ6IG51bGwsCiAgcmlnaHQ6IG51bGwsCiAgdG9wOiBudWxsLAogIGhlaWdodDogbnVsbCwKICB3aWR0aDogbnVsbCwKICBzaGFkb3dDb2xvcjogbnVsbCwKICBzaGFkb3dPZmZzZXQ6IG51bGwsCiAgYmFja2dyb3VuZEltYWdlOiBudWxsLAogIGJhY2tncm91bmRSZXBlYXQ6IG51bGwsCiAgY2VudGVyOiBudWxsLAogIGxheW91dDogbnVsbCwKICBiYWNrZ3JvdW5kU2VsZWN0ZWRDb2xvcjogbnVsbCwKICBiYWNrZ3JvdW5kU2VsZWN0ZWRJbWFnZTogbnVsbCwKICAvLyBub24tbnVsbCByZXNldHMKICBvcGFjaXR5OiAxLjAsCiAgdG91Y2hFbmFibGVkOiB0cnVlLAogIGVuYWJsZWQ6IHRydWUsCiAgaG9yaXpvbnRhbFdyYXA6IHRydWUsCiAgekluZGV4OiAwLAogIC8vIyMjIyMgRElTUEFSSVRJRVMgIyMjIyMvLwogIC8vIFNldHRpbmcgdG8gIm51bGwiIG9uIGFuZHJvaWQgd29ya3MgdGhlIGZpcnN0IHRpbWUuIExlYXZlcyB0aGUgY29sb3IKICAvLyBvbiBzdWJzZXF1ZW50IGNhbGxzLgogIGJhY2tncm91bmRDb2xvcjogZmFsc2UgPyAndHJhbnNwYXJlbnQnIDogbnVsbCwKICAvLyBjcmVhdGVzIGEgZm9udCBzbGlnaHRseSBkaWZmZXJlbnQgKHNtYWxsZXIpIHRoYW4gZGVmYXVsdCBvbiBpT1MKICAvLyBodHRwczovL2ppcmEuYXBwY2VsZXJhdG9yLm9yZy9icm93c2UvVElNT0ItMTQ1NjUKICBmb250OiBudWxsLAogIC8vIFRocm93cyBhbiBleGNlcHRpb24gb24gQW5kcm9pZCBpZiBzZXQgdG8gbnVsbC4gV29ya3Mgb24gb3RoZXIgcGxhdGZvcm1zLgogIC8vIGh0dHBzOi8vamlyYS5hcHBjZWxlcmF0b3Iub3JnL2Jyb3dzZS9USU1PQi0xNDU2NgogIHZpc2libGU6IHRydWUsCiAgLy8gU2V0dGluZyB0byAibnVsbCIgb24gYW5kcm9pZCBtYWtlcyB0ZXh0IHRyYW5zcGFyZW50CiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTY3CiAgY29sb3I6IGZhbHNlID8gJyMwMDAnIDogbnVsbCwKICAvLyBBbmRyb2lkIHdpbGwgbGVhdmUgYXJ0aWZhY3Qgb2YgcHJldmlvdXMgdHJhbnNmb3JtIHVubGVzcyB0aGUgaWRlbnRpdHkgbWF0cml4IGlzCiAgLy8gbWFudWFsbHkgcmVzZXQuCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTY4CiAgLy8KICAvLyBNb2JpbGV3ZWIgZG9lcyBub3QgcmVzcGVjdCBtYXRyaXggcHJvcGVydGllcyBzZXQgaW4gdGhlIGNvbnN0cnVjdG9yLCBkZXNwaXRlIHRoZQogIC8vIGRvY3VtZW50YXRpb24gYXQgZG9jcy5hcHBjZWxlcmF0b3IuY29tIGluZGljYXRpbmcgdGhhdCBpdCBzaG91bGQuCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTcwCiAgdHJhbnNmb3JtOiBmYWxzZSA/IElERU5USVRZX1RSQU5TRk9STSA6IG51bGwsCiAgLy8gQ3Jhc2hlcyBpZiBzZXQgdG8gbnVsbCBvbiBhbnl0aGluZyBidXQgQW5kcm9pZAogIC8vIGh0dHBzOi8vamlyYS5hcHBjZWxlcmF0b3Iub3JnL2Jyb3dzZS9USU1PQi0xNDU3MQogIGJhY2tncm91bmRHcmFkaWVudDogIWZhbHNlID8ge30gOiBudWxsLAogIC8vIEFsbCBzdXBwb3J0ZWQgcGxhdGZvcm1zIGhhdmUgdmFyeWluZyBiZWhhdmlvciB3aXRoIGJvcmRlciBwcm9wZXJ0aWVzCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTczCiAgYm9yZGVyQ29sb3I6IGZhbHNlID8gbnVsbCA6ICd0cmFuc3BhcmVudCcsCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTc1CiAgYm9yZGVyUmFkaXVzOiB0cnVlID8gMCA6IG51bGwsCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTc0CiAgYm9yZGVyV2lkdGg6IHRydWUgPyAwIDogbnVsbAp9OwoKaWYgKHRydWUpIHsKICBSRVNFVCA9IF8uZXh0ZW5kKFJFU0VULCB7CiAgICBiYWNrZ3JvdW5kTGVmdENhcDogMCwKICAgIGJhY2tncm91bmRUb3BDYXA6IDAKICB9KTsKfSBlbHNlIGlmIChmYWxzZSkgewogIFJFU0VUID0gXy5leHRlbmQoUkVTRVQsIHsKICAgIGJhY2tncm91bmREaXNhYmxlZENvbG9yOiBudWxsLAogICAgYmFja2dyb3VuZERpc2FibGVkSW1hZ2U6IG51bGwsCiAgICBiYWNrZ3JvdW5kRm9jdXNlZENvbG9yOiBudWxsLAogICAgYmFja2dyb3VuZEZvY3VzZWRJbWFnZTogbnVsbCwKICAgIGZvY3VzYWJsZTogZmFsc2UsCiAgICBrZWVwU2NyZWVuT246IGZhbHNlCiAgfSk7Cn0KCmZ1bmN0aW9uIHVjZmlyc3QodGV4dCkgewogIGlmICghdGV4dCkgewogICAgcmV0dXJuIHRleHQ7CiAgfQoKICByZXR1cm4gdGV4dFswXS50b1VwcGVyQ2FzZSgpICsgdGV4dC5zdWJzdHIoMSk7Cn0KCmZ1bmN0aW9uIGFkZE5hbWVzcGFjZShhcGlOYW1lKSB7CiAgcmV0dXJuIChDT05TVC5JTVBMSUNJVF9OQU1FU1BBQ0VTW2FwaU5hbWVdIHx8IENPTlNULk5BTUVTUEFDRV9ERUZBVUxUKSArICcuJyArIGFwaU5hbWU7Cn0KCmV4cG9ydHMuTSA9IGZ1bmN0aW9uIChuYW1lLCBtb2RlbERlc2MsIG1pZ3JhdGlvbnMpIHsKICB2YXIgY29uZmlnID0gKG1vZGVsRGVzYyB8fCB7fSkuY29uZmlnIHx8IHt9OwogIHZhciBhZGFwdGVyID0gY29uZmlnLmFkYXB0ZXIgfHwge307CiAgdmFyIGV4dGVuZE9iaiA9IHt9OwogIHZhciBleHRlbmRDbGFzcyA9IHt9OwogIHZhciBtb2Q7CgogIGlmIChhZGFwdGVyLnR5cGUpIHsKICAgIG1vZCA9IHJlcXVpcmUoJy9hbGxveS9zeW5jLycgKyBhZGFwdGVyLnR5cGUpOwoKICAgIGV4dGVuZE9iai5zeW5jID0gZnVuY3Rpb24gKG1ldGhvZCwgbW9kZWwsIG9wdHMpIHsKICAgICAgcmV0dXJuIG1vZC5zeW5jKG1ldGhvZCwgbW9kZWwsIG9wdHMpOwogICAgfTsKICB9IGVsc2UgewogICAgZXh0ZW5kT2JqLnN5bmMgPSBmdW5jdGlvbiAobWV0aG9kLCBtb2RlbCwgb3B0cykgewogICAgICBUaS5BUEkud2FybignRXhlY3V0aW9uIG9mICcgKyBtZXRob2QgKyAnI3N5bmMoKSBmdW5jdGlvbiBvbiBhIG1vZGVsIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBwZXJzaXN0ZW5jZScpOwogICAgICBUaS5BUEkud2FybignbW9kZWw6ICcgKyBKU09OLnN0cmluZ2lmeShtb2RlbC50b0pTT04oKSkpOwogICAgfTsKICB9CgogIGV4dGVuZE9iai5kZWZhdWx0cyA9IGNvbmZpZy5kZWZhdWx0czsgLy8gY29uc3RydWN0IHRoZSBtb2RlbCBiYXNlZCBvbiB0aGUgY3VycmVudCBhZGFwdGVyIHR5cGUKCiAgaWYgKG1pZ3JhdGlvbnMpIHsKICAgIGV4dGVuZENsYXNzLm1pZ3JhdGlvbnMgPSBtaWdyYXRpb25zOwogIH0gLy8gUnVuIHRoZSBwcmUgbW9kZWwgY3JlYXRpb24gY29kZSwgaWYgYW55CgoKICBpZiAobW9kICYmIF8uaXNGdW5jdGlvbihtb2QuYmVmb3JlTW9kZWxDcmVhdGUpKSB7CiAgICBjb25maWcgPSBtb2QuYmVmb3JlTW9kZWxDcmVhdGUoY29uZmlnLCBuYW1lKSB8fCBjb25maWc7CiAgfSAvLyBDcmVhdGUgdGhlIE1vZGVsIG9iamVjdAoKCiAgdmFyIE1vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKGV4dGVuZE9iaiwgZXh0ZW5kQ2xhc3MpOwogIE1vZGVsLnByb3RvdHlwZS5jb25maWcgPSBjb25maWc7IC8vIEV4dGVuZCB0aGUgTW9kZWwgd2l0aCBleHRlbmRNb2RlbCgpLCBpZiBkZWZpbmVkCgogIGlmIChfLmlzRnVuY3Rpb24obW9kZWxEZXNjLmV4dGVuZE1vZGVsKSkgewogICAgTW9kZWwgPSBtb2RlbERlc2MuZXh0ZW5kTW9kZWwoTW9kZWwpIHx8IE1vZGVsOwogIH0gLy8gUnVuIHRoZSBwb3N0IG1vZGVsIGNyZWF0aW9uIGNvZGUsIGlmIGFueQoKCiAgaWYgKG1vZCAmJiBfLmlzRnVuY3Rpb24obW9kLmFmdGVyTW9kZWxDcmVhdGUpKSB7CiAgICBtb2QuYWZ0ZXJNb2RlbENyZWF0ZShNb2RlbCwgbmFtZSk7CiAgfQoKICByZXR1cm4gTW9kZWw7Cn07CgpleHBvcnRzLkMgPSBmdW5jdGlvbiAobmFtZSwgbW9kZWxEZXNjLCBtb2RlbCkgewogIHZhciBleHRlbmRPYmogPSB7CiAgICBtb2RlbDogbW9kZWwKICB9OwogIHZhciBjb25maWcgPSAobW9kZWwgPyBtb2RlbC5wcm90b3R5cGUuY29uZmlnIDoge30pIHx8IHt9OwogIHZhciBtb2Q7CgogIGlmIChjb25maWcuYWRhcHRlciAmJiBjb25maWcuYWRhcHRlci50eXBlKSB7CiAgICBtb2QgPSByZXF1aXJlKCcvYWxsb3kvc3luYy8nICsgY29uZmlnLmFkYXB0ZXIudHlwZSk7CgogICAgZXh0ZW5kT2JqLnN5bmMgPSBmdW5jdGlvbiAobWV0aG9kLCBtb2RlbCwgb3B0cykgewogICAgICByZXR1cm4gbW9kLnN5bmMobWV0aG9kLCBtb2RlbCwgb3B0cyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBleHRlbmRPYmouc3luYyA9IGZ1bmN0aW9uIChtZXRob2QsIG1vZGVsLCBvcHRzKSB7CiAgICAgIFRpLkFQSS53YXJuKCdFeGVjdXRpb24gb2YgJyArIG1ldGhvZCArICcjc3luYygpIGZ1bmN0aW9uIG9uIGEgY29sbGVjdGlvbiB0aGF0IGRvZXMgbm90IHN1cHBvcnQgcGVyc2lzdGVuY2UnKTsKICAgICAgVGkuQVBJLndhcm4oJ21vZGVsOiAnICsgSlNPTi5zdHJpbmdpZnkobW9kZWwudG9KU09OKCkpKTsKICAgIH07CiAgfQoKICB2YXIgQ29sbGVjdGlvbiA9IEJhY2tib25lLkNvbGxlY3Rpb24uZXh0ZW5kKGV4dGVuZE9iaik7CiAgQ29sbGVjdGlvbi5wcm90b3R5cGUuY29uZmlnID0gY29uZmlnOyAvLyBleHRlbmQgdGhlIGNvbGxlY3Rpb24gb2JqZWN0CgogIGlmIChfLmlzRnVuY3Rpb24obW9kZWxEZXNjLmV4dGVuZENvbGxlY3Rpb24pKSB7CiAgICBDb2xsZWN0aW9uID0gbW9kZWxEZXNjLmV4dGVuZENvbGxlY3Rpb24oQ29sbGVjdGlvbikgfHwgQ29sbGVjdGlvbjsKICB9IC8vIGRvIGFueSBwb3N0IGNvbGxlY3Rpb24gY3JlYXRpb24gY29kZSBmb3JtIHRoZSBzeW5jIGFkYXB0ZXIKCgogIGlmIChtb2QgJiYgXy5pc0Z1bmN0aW9uKG1vZC5hZnRlckNvbGxlY3Rpb25DcmVhdGUpKSB7CiAgICBtb2QuYWZ0ZXJDb2xsZWN0aW9uQ3JlYXRlKENvbGxlY3Rpb24pOwogIH0KCiAgcmV0dXJuIENvbGxlY3Rpb247Cn07CgpleHBvcnRzLlVJID0ge307CgpleHBvcnRzLlVJLmNyZWF0ZSA9IGZ1bmN0aW9uIChjb250cm9sbGVyLCBhcGlOYW1lLCBvcHRzKSB7CiAgb3B0cyA9IG9wdHMgfHwge307IC8vIE1ha2Ugc3VyZSB3ZSBoYXZlIGEgZnVsbCBhcGkgbmFtZQoKICB2YXIgYmFzZU5hbWUsIG5zOwogIHZhciBwYXJ0cyA9IGFwaU5hbWUuc3BsaXQoJy4nKTsKCiAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMSkgewogICAgYmFzZU5hbWUgPSBhcGlOYW1lOwogICAgbnMgPSBvcHRzLm5zIHx8IENPTlNULklNUExJQ0lUX05BTUVTUEFDRVNbYmFzZU5hbWVdIHx8IENPTlNULk5BTUVTUEFDRV9ERUZBVUxUOwogIH0gZWxzZSBpZiAocGFydHMubGVuZ3RoID4gMSkgewogICAgYmFzZU5hbWUgPSBwYXJ0c1twYXJ0cy5sZW5ndGggLSAxXTsKICAgIG5zID0gcGFydHMuc2xpY2UoMCwgcGFydHMubGVuZ3RoIC0gMSkuam9pbignLicpOwogIH0gZWxzZSB7CiAgICB0aHJvdyAnQWxsb3kuVUkuY3JlYXRlKCkgZmFpbGVkOiBObyBBUEkgbmFtZSB3YXMgZ2l2ZW4gaW4gdGhlIHNlY29uZCBwYXJhbWV0ZXInOwogIH0KCiAgb3B0cy5hcGlOYW1lID0gbnMgKyAnLicgKyBiYXNlTmFtZTsKICBiYXNlTmFtZSA9IGJhc2VOYW1lWzBdLnRvVXBwZXJDYXNlKCkgKyBiYXNlTmFtZS5zdWJzdHIoMSk7IC8vIGdlbmVyYXRlIHRoZSBzdHlsZSBvYmplY3QKCiAgdmFyIHN0eWxlID0gZXhwb3J0cy5jcmVhdGVTdHlsZShjb250cm9sbGVyLCBvcHRzKTsgLy8gY3JlYXRlIHRoZSB0aXRhbml1bSBwcm94eSBvYmplY3QKCiAgcmV0dXJuIGV2YWwobnMpWydjcmVhdGUnICsgYmFzZU5hbWVdKHN0eWxlKTsKfTsKCmV4cG9ydHMuY3JlYXRlU3R5bGUgPSBmdW5jdGlvbiAoY29udHJvbGxlciwgb3B0cywgZGVmYXVsdHMpIHsKICB2YXIgY2xhc3NlcywgYXBpTmFtZTsgLy8gSWYgdGhlcmUncyBubyBvcHRzLCB0aGVyZSdzIG5vIHJlYXNvbiB0byBsb2FkIHRoZSBzdHlsZSBtb2R1bGUuIEp1c3QKICAvLyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LgoKICBpZiAoIW9wdHMpIHsKICAgIHJldHVybiB7fTsKICB9IC8vIG1ha2Ugb3B0cy5jbGFzc2VzIGFuIGFycmF5IGlmIGl0IGlzbid0IGFscmVhZHkKCgogIGlmIChfLmlzQXJyYXkob3B0cy5jbGFzc2VzKSkgewogICAgY2xhc3NlcyA9IG9wdHMuY2xhc3Nlcy5zbGljZSgwKTsKICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcob3B0cy5jbGFzc2VzKSkgewogICAgY2xhc3NlcyA9IG9wdHMuY2xhc3Nlcy5zcGxpdCgvXHMrLyk7CiAgfSBlbHNlIHsKICAgIGNsYXNzZXMgPSBbXTsKICB9IC8vIGdpdmUgb3B0cy5hcGlOYW1lIGEgbmFtZXNwYWNlIGlmIGl0IGRvZXNuJ3QgaGF2ZSBvbmUgYWxyZWFkeQoKCiAgYXBpTmFtZSA9IG9wdHMuYXBpTmFtZTsKCiAgaWYgKGFwaU5hbWUgJiYgYXBpTmFtZS5pbmRleE9mKCcuJykgPT09IC0xKSB7CiAgICBhcGlOYW1lID0gYWRkTmFtZXNwYWNlKGFwaU5hbWUpOwogIH0gLy8gVE9ETzogY2hlY2sgY2FjaGVkIHN0eWxlcyBiYXNlZCBvbiBvcHRzIGFuZCBjb250cm9sbGVyCiAgLy8gTG9hZCB0aGUgcnVudGltZSBzdHlsZSBmb3IgdGhlIGdpdmVuIGNvbnRyb2xsZXIKCgogIHZhciBzdHlsZUFycmF5OwoKICBpZiAoY29udHJvbGxlciAmJiBfLmlzT2JqZWN0KGNvbnRyb2xsZXIpKSB7CiAgICBzdHlsZUFycmF5ID0gcmVxdWlyZSgnL2FsbG95L3dpZGdldHMvJyArIGNvbnRyb2xsZXIud2lkZ2V0SWQgKyAnL3N0eWxlcy8nICsgY29udHJvbGxlci5uYW1lKTsKICB9IGVsc2UgewogICAgc3R5bGVBcnJheSA9IHJlcXVpcmUoJy9hbGxveS9zdHlsZXMvJyArIGNvbnRyb2xsZXIpOwogIH0KCiAgdmFyIHN0eWxlRmluYWwgPSB7fTsgLy8gaXRlcmF0ZSB0aHJvdWdoIGFsbCBzdHlsZXMKCiAgdmFyIGksIGxlbjsKCiAgZm9yIChpID0gMCwgbGVuID0gc3R5bGVBcnJheS5sZW5ndGg7IGkgPCBsZW47IGkrKykgewogICAgdmFyIHN0eWxlID0gc3R5bGVBcnJheVtpXTsgLy8gZ2l2ZSB0aGUgYXBpTmFtZSBhIG5hbWVzcGFjZSBpZiBuZWNlc3NhcnkKCiAgICB2YXIgc3R5bGVBcGkgPSBzdHlsZS5rZXk7CgogICAgaWYgKHN0eWxlLmlzQXBpICYmIHN0eWxlQXBpLmluZGV4T2YoJy4nKSA9PT0gLTEpIHsKICAgICAgc3R5bGVBcGkgPSAoQ09OU1QuSU1QTElDSVRfTkFNRVNQQUNFU1tzdHlsZUFwaV0gfHwgQ09OU1QuTkFNRVNQQUNFX0RFRkFVTFQpICsgJy4nICsgc3R5bGVBcGk7CiAgICB9IC8vIGRvZXMgdGhpcyBzdHlsZSBtYXRjaCB0aGUgZ2l2ZW4gb3B0cz8KCgogICAgaWYgKHN0eWxlLmlzSWQgJiYgb3B0cy5pZCAmJiBzdHlsZS5rZXkgPT09IG9wdHMuaWQgfHwgc3R5bGUuaXNDbGFzcyAmJiBfLmNvbnRhaW5zKGNsYXNzZXMsIHN0eWxlLmtleSkpIHsvLyBkbyBub3RoaW5nIGhlcmUsIGtlZXAgb24gcHJvY2Vzc2luZwogICAgfSBlbHNlIGlmIChzdHlsZS5pc0FwaSkgewogICAgICBpZiAoc3R5bGUua2V5LmluZGV4T2YoJy4nKSA9PT0gLTEpIHsKICAgICAgICBzdHlsZS5rZXkgPSBhZGROYW1lc3BhY2Uoc3R5bGUua2V5KTsKICAgICAgfQoKICAgICAgaWYgKHN0eWxlLmtleSAhPT0gYXBpTmFtZSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICAvLyBubyBtYXRjaGVzLCBza2lwIHRoaXMgc3R5bGUKICAgICAgY29udGludWU7CiAgICB9IC8vIGNhbiB3ZSBjbGVhciBvdXQgYW55IGZvcm0gZmFjdG9yIHF1ZXJpZXM/CgoKICAgIGlmIChzdHlsZS5xdWVyaWVzICYmIHN0eWxlLnF1ZXJpZXMuZm9ybUZhY3RvciAmJiAhZXhwb3J0c1tzdHlsZS5xdWVyaWVzLmZvcm1GYWN0b3JdKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfSAvLyBwcm9jZXNzIHJ1bnRpbWUgY3VzdG9tIHF1ZXJpZXMKCgogICAgaWYgKHN0eWxlLnF1ZXJpZXMgJiYgc3R5bGUucXVlcmllcy5pZiAmJiAoc3R5bGUucXVlcmllcy5pZi50cmltKCkudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJyB8fCBzdHlsZS5xdWVyaWVzLmlmLmluZGV4T2YoJ0FsbG95Lkdsb2JhbHMnKSAhPT0gLTEgJiYgZXhwb3J0cy5HbG9iYWxzW3N0eWxlLnF1ZXJpZXMuaWYuc3BsaXQoJy4nKVsyXV0gPT09IGZhbHNlKSkgewogICAgICBjb250aW51ZTsKICAgIH0gLy8gTWVyZ2UgdGhpcyBzdHlsZSBpbnRvIHRoZSBleGlzdGluZyBzdHlsZSBvYmplY3QKCgogICAgZXhwb3J0cy5kZWVwRXh0ZW5kKHRydWUsIHN0eWxlRmluYWwsIHN0eWxlLnN0eWxlKTsKICB9IC8vIFRPRE86IGNhY2hlIHRoZSBzdHlsZSBiYXNlZCBvbiB0aGUgb3B0cyBhbmQgY29udHJvbGxlcgogIC8vIE1lcmdlIHJlbWFpbmluZyBleHRyYSBzdHlsZSBwcm9wZXJ0aWVzIGZyb20gb3B0cywgaWYgYW55CgoKICB2YXIgZXh0cmFTdHlsZSA9IF8ub21pdChvcHRzLCBbQ09OU1QuQ0xBU1NfUFJPUEVSVFksIENPTlNULkFQSU5BTUVfUFJPUEVSVFldKTsKCiAgZXhwb3J0cy5kZWVwRXh0ZW5kKHRydWUsIHN0eWxlRmluYWwsIGV4dHJhU3R5bGUpOwogIHN0eWxlRmluYWxbQ09OU1QuQ0xBU1NfUFJPUEVSVFldID0gY2xhc3NlczsKICBzdHlsZUZpbmFsW0NPTlNULkFQSU5BTUVfUFJPUEVSVFldID0gYXBpTmFtZTsKCiAgaWYgKE1XMzIwX0NIRUNLKSB7CiAgICBkZWxldGUgc3R5bGVGaW5hbFtDT05TVC5BUElOQU1FX1BST1BFUlRZXTsKICB9CgogIHJldHVybiBkZWZhdWx0cyA/IF8uZGVmYXVsdHMoc3R5bGVGaW5hbCwgZGVmYXVsdHMpIDogc3R5bGVGaW5hbDsKfTsKCmZ1bmN0aW9uIHByb2Nlc3NTdHlsZShjb250cm9sbGVyLCBwcm94eSwgY2xhc3Nlcywgb3B0cywgZGVmYXVsdHMpIHsKICBvcHRzID0gb3B0cyB8fCB7fTsKICBvcHRzLmNsYXNzZXMgPSBjbGFzc2VzOwoKICBpZiAocHJveHkuYXBpTmFtZSkgewogICAgb3B0cy5hcGlOYW1lID0gcHJveHkuYXBpTmFtZTsKICB9CgogIGlmIChwcm94eS5pZCkgewogICAgb3B0cy5pZCA9IHByb3h5LmlkOwogIH0KCiAgcHJveHkuYXBwbHlQcm9wZXJ0aWVzKGV4cG9ydHMuY3JlYXRlU3R5bGUoY29udHJvbGxlciwgb3B0cywgZGVmYXVsdHMpKTsKCiAgaWYgKGZhbHNlKSB7CiAgICBwcm94eS5jbGFzc2VzID0gY2xhc3NlczsKICB9Cn0KCmV4cG9ydHMuYWRkQ2xhc3MgPSBmdW5jdGlvbiAoY29udHJvbGxlciwgcHJveHksIGNsYXNzZXMsIG9wdHMpIHsKICAvLyBtYWtlIHN1cmUgd2UgYWN0dWFsbHkgaGF2ZSBjbGFzc2VzIHRvIGFkZAogIGlmICghY2xhc3NlcykgewogICAgaWYgKG9wdHMpIHsKICAgICAgaWYgKE1XMzIwX0NIRUNLKSB7CiAgICAgICAgZGVsZXRlIG9wdHMuYXBpTmFtZTsKICAgICAgfQoKICAgICAgcHJveHkuYXBwbHlQcm9wZXJ0aWVzKG9wdHMpOwogICAgfQoKICAgIHJldHVybjsKICB9IGVsc2UgewogICAgLy8gY3JlYXRlIGEgdW5pb24gb2YgdGhlIGV4aXN0aW5nIGNsYXNzZXMgd2l0aCB0aGUgbmV3IG9uZShzKQogICAgdmFyIHBDbGFzc2VzID0gcHJveHlbQ09OU1QuQ0xBU1NfUFJPUEVSVFldIHx8IFtdOwogICAgdmFyIGJlZm9yZUxlbiA9IHBDbGFzc2VzLmxlbmd0aDsKICAgIGNsYXNzZXMgPSBfLmlzU3RyaW5nKGNsYXNzZXMpID8gY2xhc3Nlcy5zcGxpdCgvXHMrLykgOiBjbGFzc2VzOwoKICAgIHZhciBuZXdDbGFzc2VzID0gXy51bmlvbihwQ2xhc3NlcywgY2xhc3NlcyB8fCBbXSk7IC8vIG1ha2Ugc3VyZSB3ZSBhY3R1YWxseSBhZGRlZCBjbGFzc2VzIGJlZm9yZSBwcm9jZXNzaW5nIHN0eWxlcwoKCiAgICBpZiAoYmVmb3JlTGVuID09PSBuZXdDbGFzc2VzLmxlbmd0aCkgewogICAgICBpZiAob3B0cykgewogICAgICAgIGlmIChNVzMyMF9DSEVDSykgewogICAgICAgICAgZGVsZXRlIG9wdHMuYXBpTmFtZTsKICAgICAgICB9CgogICAgICAgIHByb3h5LmFwcGx5UHJvcGVydGllcyhvcHRzKTsKICAgICAgfQoKICAgICAgcmV0dXJuOwogICAgfSBlbHNlIHsKICAgICAgcHJvY2Vzc1N0eWxlKGNvbnRyb2xsZXIsIHByb3h5LCBuZXdDbGFzc2VzLCBvcHRzKTsKICAgIH0KICB9Cn07CgpleHBvcnRzLnJlbW92ZUNsYXNzID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIsIHByb3h5LCBjbGFzc2VzLCBvcHRzKSB7CiAgY2xhc3NlcyA9IGNsYXNzZXMgfHwgW107CiAgdmFyIHBDbGFzc2VzID0gcHJveHlbQ09OU1QuQ0xBU1NfUFJPUEVSVFldIHx8IFtdOwogIHZhciBiZWZvcmVMZW4gPSBwQ2xhc3Nlcy5sZW5ndGg7IC8vIG1ha2Ugc3VyZSB0aGVyZSdzIGNsYXNzZXMgdG8gcmVtb3ZlIGJlZm9yZSBwcm9jZXNzaW5nCgogIGlmICghYmVmb3JlTGVuIHx8ICFjbGFzc2VzLmxlbmd0aCkgewogICAgaWYgKG9wdHMpIHsKICAgICAgaWYgKE1XMzIwX0NIRUNLKSB7CiAgICAgICAgZGVsZXRlIG9wdHMuYXBpTmFtZTsKICAgICAgfQoKICAgICAgcHJveHkuYXBwbHlQcm9wZXJ0aWVzKG9wdHMpOwogICAgfQoKICAgIHJldHVybjsKICB9IGVsc2UgewogICAgLy8gcmVtb3ZlIHRoZSBnaXZlbiBjbGFzcyhlcykKICAgIGNsYXNzZXMgPSBfLmlzU3RyaW5nKGNsYXNzZXMpID8gY2xhc3Nlcy5zcGxpdCgvXHMrLykgOiBjbGFzc2VzOwoKICAgIHZhciBuZXdDbGFzc2VzID0gXy5kaWZmZXJlbmNlKHBDbGFzc2VzLCBjbGFzc2VzKTsgLy8gbWFrZSBzdXJlIHRoZXJlIHdhcyBhY3R1YWxseSBhIGRpZmZlcmVuY2UgYmVmb3JlIHByb2Nlc3NpbmcKCgogICAgaWYgKGJlZm9yZUxlbiA9PT0gbmV3Q2xhc3Nlcy5sZW5ndGgpIHsKICAgICAgaWYgKG9wdHMpIHsKICAgICAgICBpZiAoTVczMjBfQ0hFQ0spIHsKICAgICAgICAgIGRlbGV0ZSBvcHRzLmFwaU5hbWU7CiAgICAgICAgfQoKICAgICAgICBwcm94eS5hcHBseVByb3BlcnRpZXMob3B0cyk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIHByb2Nlc3NTdHlsZShjb250cm9sbGVyLCBwcm94eSwgbmV3Q2xhc3Nlcywgb3B0cywgUkVTRVQpOwogICAgfQogIH0KfTsKCmV4cG9ydHMucmVzZXRDbGFzcyA9IGZ1bmN0aW9uIChjb250cm9sbGVyLCBwcm94eSwgY2xhc3Nlcywgb3B0cykgewogIGNsYXNzZXMgPSBjbGFzc2VzIHx8IFtdOwogIGNsYXNzZXMgPSBfLmlzU3RyaW5nKGNsYXNzZXMpID8gY2xhc3Nlcy5zcGxpdCgvXHMrLykgOiBjbGFzc2VzOwogIHByb2Nlc3NTdHlsZShjb250cm9sbGVyLCBwcm94eSwgY2xhc3Nlcywgb3B0cywgUkVTRVQpOwp9OwovKioKICogQG1ldGhvZCBjcmVhdGVXaWRnZXQKICogRmFjdG9yeSBtZXRob2QgZm9yIGluc3RhbnRpYXRpbmcgYSB3aWRnZXQgY29udHJvbGxlci4gQ3JlYXRlcyBhbmQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiB0aGUKICogbmFtZWQgd2lkZ2V0LgogKiBAcGFyYW0ge1N0cmluZ30gaWQgSWQgb2Ygd2lkZ2V0IHRvIGluc3RhbnRpYXRlLgogKiBAcGFyYW0ge1N0cmluZ30gW25hbWU9IndpZGdldCJdIE5hbWUgb2YgdGhlIHZpZXcgd2l0aGluIHRoZSB3aWRnZXQgdG8gaW5zdGFudGlhdGUgKCd3aWRnZXQnIGJ5IGRlZmF1bHQpCiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnc10gQXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIHdpZGdldC4KICogQHJldHVybiB7QWxsb3kuQ29udHJvbGxlcn0gQWxsb3kgd2lkZ2V0IGNvbnRyb2xsZXIgb2JqZWN0LgogKi8KCgpleHBvcnRzLmNyZWF0ZVdpZGdldCA9IGZ1bmN0aW9uIChpZCwgbmFtZSwgYXJncykgewogIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbmFtZSAhPT0gbnVsbCAmJiBfLmlzT2JqZWN0KG5hbWUpICYmICFfLmlzU3RyaW5nKG5hbWUpKSB7CiAgICBhcmdzID0gbmFtZTsKICAgIG5hbWUgPSBERUZBVUxUX1dJREdFVDsKICB9CgogIHJldHVybiBuZXcgKHJlcXVpcmUoJy9hbGxveS93aWRnZXRzLycgKyBpZCArICcvY29udHJvbGxlcnMvJyArIChuYW1lIHx8IERFRkFVTFRfV0lER0VUKS5yZXBsYWNlKC9eXC4/XC8vLCAnJykpLmRlZmF1bHQpKGFyZ3MpOwp9OwovKioKICogQG1ldGhvZCBjcmVhdGVDb250cm9sbGVyCiAqIEZhY3RvcnkgbWV0aG9kIGZvciBpbnN0YW50aWF0aW5nIGEgY29udHJvbGxlci4gQ3JlYXRlcyBhbmQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiB0aGUKICogbmFtZWQgY29udHJvbGxlci4KICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBjb250cm9sbGVyIHRvIGluc3RhbnRpYXRlLgogKiBAcGFyYW0ge09iamVjdH0gW2FyZ3NdIEFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBjb250cm9sbGVyLgogKiBAcmV0dXJuIHtBbGxveS5Db250cm9sbGVyfSBBbGxveSBjb250cm9sbGVyIG9iamVjdC4KICovCgoKZXhwb3J0cy5jcmVhdGVDb250cm9sbGVyID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHsKICByZXR1cm4gbmV3IChyZXF1aXJlKCcvYWxsb3kvY29udHJvbGxlcnMvJyArIG5hbWUucmVwbGFjZSgvXlwuP1wvLywgJycpKS5kZWZhdWx0KShhcmdzKTsKfTsKLyoqCiAqIEBtZXRob2QgY3JlYXRlTW9kZWwKICogRmFjdG9yeSBtZXRob2QgZm9yIGluc3RhbnRpYXRpbmcgYSBCYWNrYm9uZSBNb2RlbCBvYmplY3QuIENyZWF0ZXMgYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgdGhlCiAqIG5hbWVkIG1vZGVsLgogKgogKiBTZWUgW0JhY2tib25lLk1vZGVsXShodHRwOi8vZG9jcy5hcHBjZWxlcmF0b3IuY29tL2JhY2tib25lLzAuOS4yLyNNb2RlbCkgaW4gdGhlIEJhY2tib25lLmpzIGRvY3VtZW50YXRpb24gZm9yCiAqIGluZm9ybWF0aW9uIG9uIHRoZSBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIHByb3ZpZGVkIGJ5IHRoZSBNb2RlbCBvYmplY3QuCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgbW9kZWwgdG8gaW5zdGFudGlhdGUuCiAqIEBwYXJhbSB7T2JqZWN0fSBbYXJnc10gQXJndW1lbnRzIHRvIHBhc3MgdG8gdGhlIG1vZGVsLgogKiBAcmV0dXJuIHtCYWNrYm9uZS5Nb2RlbH0gQmFja2JvbmUgbW9kZWwgb2JqZWN0LgogKi8KCgpleHBvcnRzLmNyZWF0ZU1vZGVsID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHsKICByZXR1cm4gbmV3IChyZXF1aXJlKCcvYWxsb3kvbW9kZWxzLycgKyBuYW1lKS5Nb2RlbCkoYXJncyk7Cn07Ci8qKgogKiBAbWV0aG9kIGNyZWF0ZUNvbGxlY3Rpb24KICogRmFjdG9yeSBtZXRob2QgZm9yIGluc3RhbnRpYXRpbmcgYSBCYWNrYm9uZSBjb2xsZWN0aW9uIG9mIG1vZGVsIG9iamVjdHMuIENyZWF0ZXMgYW5kIHJldHVybnMgYQogKiBjb2xsZWN0aW9uIGZvciBob2xkaW5nIHRoZSBuYW1lZCB0eXBlIG9mIG1vZGVsIG9iamVjdHMuCiAqCiAqIFNlZSBbQmFja2JvbmUuQ29sbGVjdGlvbl0oaHR0cDovL2RvY3MuYXBwY2VsZXJhdG9yLmNvbS9iYWNrYm9uZS8wLjkuMi8jQ29sbGVjdGlvbikgaW4gdGhlIEJhY2tib25lLmpzCiAqIGRvY3VtZW50YXRpb24gZm9yICBpbmZvcm1hdGlvbiBvbiB0aGUgbWV0aG9kcyBhbmQgIHByb3BlcnRpZXMgcHJvdmlkZWQgYnkgdGhlCiAqIENvbGxlY3Rpb24gb2JqZWN0LgogKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIG1vZGVsIHRvIGhvbGQgaW4gdGhpcyBjb2xsZWN0aW9uLgogKiBAcGFyYW0ge09iamVjdH0gW2FyZ3NdIEFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBjb2xsZWN0aW9uLgogKiBAcmV0dXJuIHtCYWNrYm9uZS5Db2xsZWN0aW9ufSBCYWNrYm9uZSBjb2xsZWN0aW9uIG9iamVjdC4KICovCgoKZXhwb3J0cy5jcmVhdGVDb2xsZWN0aW9uID0gZnVuY3Rpb24gKG5hbWUsIGFyZ3MpIHsKICByZXR1cm4gbmV3IChyZXF1aXJlKCcvYWxsb3kvbW9kZWxzLycgKyBuYW1lKS5Db2xsZWN0aW9uKShhcmdzKTsKfTsKCmZ1bmN0aW9uIGlzVGFibGV0RmFsbGJhY2soKSB7CiAgcmV0dXJuIE1hdGgubWluKFRpLlBsYXRmb3JtLmRpc3BsYXlDYXBzLnBsYXRmb3JtSGVpZ2h0LCBUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybVdpZHRoKSA+PSA3MDA7Cn0KLyoqCiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaXNUYWJsZXQKICogYHRydWVgIGlmIHRoZSBjdXJyZW50IGRldmljZSBpcyBhIHRhYmxldC4KICoKICovCgoKZXhwb3J0cy5pc1RhYmxldCA9IGZ1bmN0aW9uICgpIHsKICBpZiAodHJ1ZSkgewogICAgcmV0dXJuIFRpLlBsYXRmb3JtLm9zbmFtZSA9PT0gJ2lwYWQnOwogIH0gZWxzZSBpZiAoZmFsc2UpIHsKICAgIHZhciBwc2MgPSBUaS5QbGF0Zm9ybS5BbmRyb2lkLnBoeXNpY2FsU2l6ZUNhdGVnb3J5OwogICAgcmV0dXJuIHBzYyA9PT0gVGkuUGxhdGZvcm0uQW5kcm9pZC5QSFlTSUNBTF9TSVpFX0NBVEVHT1JZX0xBUkdFIHx8IHBzYyA9PT0gVGkuUGxhdGZvcm0uQW5kcm9pZC5QSFlTSUNBTF9TSVpFX0NBVEVHT1JZX1hMQVJHRTsKICB9IGVsc2UgaWYgKE9TX01PQklMRVdFQikgewogICAgcmV0dXJuIE1hdGgubWluKFRpLlBsYXRmb3JtLmRpc3BsYXlDYXBzLnBsYXRmb3JtSGVpZ2h0LCBUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybVdpZHRoKSA+PSA0MDA7IC8vIH0gZWxzZSBpZiAoT1NfQkxBQ0tCRVJSWSkgewogICAgLy8gCS8vIFRhYmxldHMgbm90IGN1cnJlbnRseSBzdXBwb3J0ZWQgYnkgQkIgVGlTREsKICAgIC8vIAkvLyBodHRwczovL2ppcmEuYXBwY2VsZXJhdG9yLm9yZy9icm93c2UvVElNT0ItMTMyMjUKICAgIC8vIAlyZXR1cm4gZmFsc2U7CiAgfSBlbHNlIGlmIChmYWxzZSkgewogICAgLy8gcGVyIGh0dHA6Ly93d3cuZXh0cmVtZXRlY2guY29tL2NvbXB1dGluZy8xMzk3Njgtd2luZG93cy04LXNtYXJ0cGhvbmVzLWFuZC13aW5kb3dzLXBob25lLTgtdGFibGV0cwogICAgLy8gdGFibGV0cyBzaG91bGQgYmUgPj0gMTAyNHg3NjggYW5kIHBob25lcyBjb3VsZCBiZSBsb3dlciwgdGhvdWdoIGN1cnJlbnQgcGhvbmVzIGFyZSBydW5uaW5nIGF0CiAgICAvLyB0aGUgMTI4MHg3MjAgcmFuZ2UgYW5kIGhpZ2hlcgogICAgcmV0dXJuIE1hdGgubWF4KFRpLlBsYXRmb3JtLmRpc3BsYXlDYXBzLnBsYXRmb3JtSGVpZ2h0LCBUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybVdpZHRoKSA+PSAxMDI0OwogIH0gZWxzZSB7CiAgICByZXR1cm4gaXNUYWJsZXRGYWxsYmFjaygpOwogIH0KfSgpOwovKioKICogQHByb3BlcnR5IHtCb29sZWFufSBpc0hhbmRoZWxkCiAqIGB0cnVlYCBpZiB0aGUgY3VycmVudCBkZXZpY2UgaXMgYSBoYW5kaGVsZCBkZXZpY2UgKG5vdCBhIHRhYmxldCkuCiAqCiAqLwoKCmV4cG9ydHMuaXNIYW5kaGVsZCA9ICFleHBvcnRzLmlzVGFibGV0OwovKioKICogQHByb3BlcnR5IHtPYmplY3R9IEdsb2JhbHMKICogQW4gb2JqZWN0IGZvciBzdG9yaW5nIGdsb2JhbGx5IGFjY2Vzc2libGUgdmFyaWFibGVzIGFuZCBmdW5jdGlvbnMuCiAqIEFsbG95Lkdsb2JhbHMgaXMgYWNjZXNzaWJsZSBpbiBhbnkgY29udHJvbGxlciBpbiB5b3VyIGFwcDoKICoKICogICAgIEFsbG95Lkdsb2JhbHMuc29tZUdsb2JhbE9iamVjdCA9IHsga2V5OiAndmFsdWUnIH07CiAqICAgICBBbGxveS5HbG9iYWxzLnNvbWVHbG9iYWxGdW5jdGlvbiA9IGZ1bmN0aW9uKCl7fTsKICoKICogQWxsb3kuR2xvYmFscyBjYW4gYmUgYWNjZXNzZWQgaW4gb3RoZXIgbm9uLWNvbnRyb2xsZXIgSmF2YXNjcmlwdCBmaWxlcwogKiBsaWtlIHRoaXM6CiAqCiAqICAgICB2YXIgdGhlT2JqZWN0ID0gcmVxdWlyZSgnYWxsb3knKS5HbG9iYWxzLnNvbWVHbG9iYWxPYmplY3Q7CiAqCiAqLwoKZXhwb3J0cy5HbG9iYWxzID0ge307Ci8qKgogKiBAcHJvcGVydHkge09iamVjdH0gTW9kZWxzCiAqIEFuIG9iamVjdCBmb3Igc3RvcmluZyBnbG9iYWxseSBhY2Nlc3NpYmxlIEFsbG95IG1vZGVscy4gU2luZ2xldG9uIG1vZGVscwogKiBjcmVhdGVkIHZpYSBtYXJrdXAgd2lsbCBiZSBzdG9yZWQgb24gdGhpcyBvYmplY3QuCiAqCiAqICAgICA8TW9kZWwgc3JjPSJteU1vZGVsIi8+CiAqCiAqIFRoZSBhYm92ZSBtYXJrdXAgd291bGQgZWZmZWN0aXZlbHkgZ2VuZXJhdGUgdGhlIGZvbGxvd2luZyBjb2RlOgogKgogKiAgICAgQWxsb3kuTW9kZWxzLm15TW9kZWwgPSBBbGxveS5jcmVhdGVNb2RlbCgnTXlNb2RlbCcpOwogKgogKiBBbGxveS5Nb2RlbHMubXlNb2RlbCB3b3VsZCB0aGVuIGJlIGFjY2Vzc2libGUgaW4gYW55IGNvbnRyb2xsZXIgaW4geW91ciBhcHAuCiAqCiAqLwoKZXhwb3J0cy5Nb2RlbHMgPSB7fTsKLyoKICogQ3JlYXRlcyBhIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBhIE1vZGVsIGJhc2VkIG9uIHRoZSBnaXZlbiBtb2RlbCwgb3IKICogcmV0dXJucyBhbiBleGlzdGluZyBpbnN0YW5jZSBpZiBvbmUgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkLgogKiBEb2N1bWVudGVkIGluIGRvY3MvYXBpZG9jL21vZGVsLmpzIGZvciBkb2NzIHNpdGUuCiAqLwoKZXhwb3J0cy5Nb2RlbHMuaW5zdGFuY2UgPSBmdW5jdGlvbiAobmFtZSkgewogIHJldHVybiBleHBvcnRzLk1vZGVsc1tuYW1lXSB8fCAoZXhwb3J0cy5Nb2RlbHNbbmFtZV0gPSBleHBvcnRzLmNyZWF0ZU1vZGVsKG5hbWUpKTsKfTsKLyoqCiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBDb2xsZWN0aW9ucwogKiBBbiBvYmplY3QgZm9yIHN0b3JpbmcgZ2xvYmFsbHkgYWNjZXNzaWJsZSBBbGxveSBjb2xsZWN0aW9ucy4gU2luZ2xldG9uIGNvbGxlY3Rpb25zCiAqIGNyZWF0ZWQgdmlhIG1hcmt1cCB3aWxsIGJlIHN0b3JlZCBvbiB0aGlzIG9iamVjdC4KICoKICogICAgIDxDb2xsZWN0aW9uIHNyYz0ibXlNb2RlbCIvPgogKgogKiBUaGUgYWJvdmUgbWFya3VwIHdvdWxkIGVmZmVjdGl2ZWx5IGdlbmVyYXRlIHRoZSBmb2xsb3dpbmcgY29kZToKICoKICogICAgIEFsbG95LkNvbGxlY3Rpb25zLm15TW9kZWwgPSBBbGxveS5jcmVhdGVDb2xsZWN0aW9uKCdNeU1vZGVsJyk7CiAqCiAqIEFsbG95LkNvbGxlY3Rpb25zLm15TW9kZWwgd291bGQgdGhlbiBiZSBhY2Nlc3NpYmxlIGluIGFueSBjb250cm9sbGVyIGluIHlvdXIgYXBwLgogKgogKi8KCgpleHBvcnRzLkNvbGxlY3Rpb25zID0ge307Ci8qCiAqIENyZWF0ZXMgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgYSBDb2xsZWN0aW9uIGJhc2VkIG9uIHRoZSBnaXZlbiBtb2RlbCwgb3IKICogcmV0dXJucyBhbiBleGlzdGluZyBpbnN0YW5jZSBpZiBvbmUgaGFzIGFscmVhZHkgYmVlbiBjcmVhdGVkLgogKiBEb2N1bWVudGVkIGluIGRvY3MvYXBpZG9jL2NvbGxlY3Rpb24uanMgZm9yIGRvY3Mgc2l0ZS4KICovCgpleHBvcnRzLkNvbGxlY3Rpb25zLmluc3RhbmNlID0gZnVuY3Rpb24gKG5hbWUpIHsKICByZXR1cm4gZXhwb3J0cy5Db2xsZWN0aW9uc1tuYW1lXSB8fCAoZXhwb3J0cy5Db2xsZWN0aW9uc1tuYW1lXSA9IGV4cG9ydHMuY3JlYXRlQ29sbGVjdGlvbihuYW1lKSk7Cn07Ci8qKgogKiBAcHJvcGVydHkge09iamVjdH0gQ0ZHCiAqIEFuIG9iamVjdCB0aGF0IHN0b3JlcyBBbGxveSBjb25maWd1cmF0aW9uIHZhbHVlcyBhcyBkZWZpbmVkIGluIHlvdXIgYXBwJ3MKICogYXBwL2NvbmZpZy5qc29uIGZpbGUuIEhlcmUncyB3aGF0IGEgdHlwaWNhbCBjb25maWcuanNvbiBmaWxlIG1pZ2h0IGxvb2sKICogbGlrZSBpbiBhbiBBbGxveSBhcHAuCiAqCiAqICAgICB7CiAqICAgICAgICAgImdsb2JhbCI6IHsgImtleSI6ICJkZWZhdWx0VmFsdWUiLCAiYW5vdGhlcktleSI6IDEyMzQ1IH0sCiAqICAgICAgICAgImVudjpkZXZlbG9wbWVudCI6IHt9LAogKiAgICAgICAgICJlbnY6dGVzdCI6IHt9LAogKiAgICAgICAgICJlbnY6cHJvZHVjdGlvbiI6IHt9LAogKiAgICAgICAgICJvczppb3MiOiB7ICJrZXkiOiAiaW9zVmFsdWUiIH0sCiAqICAgICAgICAgIm9zOmFuZHJvaWQiOiB7ICJrZXkiOiAiYW5kcm9pZFZhbHVlIiB9LAogKiAgICAgICAgICJkZXBlbmRlbmNpZXMiOiB7fQogKiAgICAgfQogKgogKiBJZiB0aGlzIGFwcCB3YXMgY29tcGlsZWQgZm9yIGlPUywgdGhlIEFsbG95LkNGRyB3b3VsZCBsb29rIGxpa2UgdGhpczoKICoKICogICAgIEFsbG95LkNGRyA9IHsKICogICAgICAgICAia2V5IjogImlvc1ZhbHVlIiwKICogICAgICAgICAiYW5vdGhlcktleSI6IDEyMzQ1CiAqICAgICB9CiAqCiAqIEFsbG95LkNGRyBpcyBhY2Nlc3NpYmxlIGluIGFueSBjb250cm9sbGVyIGluIHlvdXIgYXBwLCBhbmQgY2FuIGJlIGFjY2Vzc2VkCiAqIGluIG90aGVyIG5vbi1jb250cm9sbGVyIEphdmFzY3JpcHQgZmlsZXMgbGlrZSB0aGlzOgogKgogKiAgICAgdmFyIHRoZUtleSA9IHJlcXVpcmUoJ2FsbG95JykuQ0ZHLmtleTsKICoKICovCgoKZXhwb3J0cy5DRkcgPSByZXF1aXJlKCcvYWxsb3kvQ0ZHJyk7CgppZiAoZmFsc2UpIHsKICBleHBvcnRzLkFuZHJvaWQgPSB7fTsKICBleHBvcnRzLkFuZHJvaWQubWVudUl0ZW1DcmVhdGVBcmdzID0gWydpdGVtSWQnLCAnZ3JvdXBJZCcsICd0aXRsZScsICdvcmRlcicsICdhY3Rpb25WaWV3JywgJ2NoZWNrYWJsZScsICdjaGVja2VkJywgJ2VuYWJsZWQnLCAnaWNvbicsICdzaG93QXNBY3Rpb24nLCAndGl0bGVDb25kZW5zZWQnLCAndmlzaWJsZSddOwp9Ci8qCiAqIEFkYXB0ZWQgdmVyc2lvbiBvZiBub2RlLmV4dGVuZCBodHRwczovL3d3dy5ucG1qcy5vcmcvcGFja2FnZS9ub2RlLmV4dGVuZAogKgogKiBPcmlnaW5hbCBjb3B5cmlnaHQ6CiAqCiAqIG5vZGUuZXh0ZW5kCiAqIENvcHlyaWdodCAyMDExLCBKb2huIFJlc2lnCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIEBmaWxlb3ZlcnZpZXcKICogUG9ydCBvZiBqUXVlcnkuZXh0ZW5kIHRoYXQgYWN0dWFsbHkgd29ya3Mgb24gbm9kZS5qcwogKi8KCgpleHBvcnRzLmRlZXBFeHRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fTsKICB2YXIgaSA9IDE7CiAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgdmFyIGRlZXAgPSBmYWxzZTsKICB2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5X2lzX2FycmF5LCBjbG9uZTsgLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvbgoKICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7CiAgICBkZWVwID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9OyAvLyBza2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0CgogICAgaSA9IDI7CiAgfSAvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSkKCgogIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnb2JqZWN0JyAmJiAhXy5pc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIHRhcmdldCA9IHt9OwogIH0KCiAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgLy8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlcwogICAgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTsKCiAgICBpZiAob3B0aW9ucyAhPSBudWxsKSB7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBvcHRpb25zID0gb3B0aW9ucy5zcGxpdCgnJyk7CiAgICAgIH0gLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdAoKCiAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7CiAgICAgICAgc3JjID0gdGFyZ2V0W25hbWVdOwogICAgICAgIGNvcHkgPSBvcHRpb25zW25hbWVdOyAvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wCgogICAgICAgIGlmICh0YXJnZXQgPT09IGNvcHkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRlZXAgJiYgY29weSAmJiAhXy5pc0Z1bmN0aW9uKGNvcHkpICYmIF8uaXNPYmplY3QoY29weSkgJiYgKChjb3B5X2lzX2FycmF5ID0gXy5pc0FycmF5KGNvcHkpKSB8fCAhXy5oYXMoY29weSwgJ2FwaU5hbWUnKSkpIHsKICAgICAgICAgIC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5cwogICAgICAgICAgaWYgKGNvcHlfaXNfYXJyYXkpIHsKICAgICAgICAgICAgY29weV9pc19hcnJheSA9IGZhbHNlOwogICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBfLmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdOwogICAgICAgICAgfSBlbHNlIGlmIChfLmlzRGF0ZShjb3B5KSkgewogICAgICAgICAgICBjbG9uZSA9IG5ldyBEYXRlKGNvcHkudmFsdWVPZigpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNsb25lID0gc3JjICYmIF8uaXNPYmplY3Qoc3JjKSA/IHNyYyA6IHt9OwogICAgICAgICAgfSAvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW0KCgogICAgICAgICAgdGFyZ2V0W25hbWVdID0gZXhwb3J0cy5kZWVwRXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0CgoKICByZXR1cm4gdGFyZ2V0Owp9Ow=="},{"version":3,"sources":["/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js"],"names":["_","require","Backbone","CONST","exports","version","ALLOY_VERSION","DEFAULT_WIDGET","MW320_CHECK","OS_MOBILEWEB","IDENTITY_TRANSFORM","Ti","UI","createMatrix2D","create2DMatrix","undefined","RESET","bottom","left","right","top","height","width","shadowColor","shadowOffset","backgroundImage","backgroundRepeat","center","layout","backgroundSelectedColor","backgroundSelectedImage","opacity","touchEnabled","enabled","horizontalWrap","zIndex","backgroundColor","font","visible","color","transform","backgroundGradient","borderColor","borderRadius","borderWidth","extend","backgroundLeftCap","backgroundTopCap","backgroundDisabledColor","backgroundDisabledImage","backgroundFocusedColor","backgroundFocusedImage","focusable","keepScreenOn","ucfirst","text","toUpperCase","substr","addNamespace","apiName","IMPLICIT_NAMESPACES","NAMESPACE_DEFAULT","M","name","modelDesc","migrations","config","adapter","extendObj","extendClass","mod","type","sync","method","model","opts","API","warn","JSON","stringify","toJSON","defaults","isFunction","beforeModelCreate","Model","prototype","extendModel","afterModelCreate","C","Collection","extendCollection","afterCollectionCreate","create","controller","baseName","ns","parts","split","length","slice","join","style","createStyle","eval","classes","isArray","isString","indexOf","styleArray","isObject","widgetId","styleFinal","i","len","styleApi","key","isApi","isId","id","isClass","contains","queries","formFactor","if","trim","toLowerCase","Globals","deepExtend","extraStyle","omit","CLASS_PROPERTY","APINAME_PROPERTY","processStyle","proxy","applyProperties","addClass","pClasses","beforeLen","newClasses","union","removeClass","difference","resetClass","createWidget","args","replace","default","createController","createModel","createCollection","isTabletFallback","Math","min","Platform","displayCaps","platformHeight","platformWidth","isTablet","osname","psc","Android","physicalSizeCategory","PHYSICAL_SIZE_CATEGORY_LARGE","PHYSICAL_SIZE_CATEGORY_XLARGE","max","isHandheld","Models","instance","Collections","CFG","menuItemCreateArgs","target","arguments","deep","options","src","copy","copy_is_array","clone","has","isDate","Date","valueOf"],"mappings":"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","sourcesContent":["/**\n * @class Alloy\n * Top-level module for Alloy functions.\n *\n * Alloy is an application framework built on top of the Titanium SDK designed to help rapidly\n * develop high quality applications and reduce maintenance.\n *\n * Alloy uses the model-view-controller architecture to separate the application into three\n * components:\n *\n *  * **Models** provide the data of the application. Alloy utilizes **Backbone Model and Collection**\n *     objects for this functionality.\n *\n *  * **Views** provide the UI components to interact with the application, written using **XML markup**\n *    and **Titanium Stylesheets (TSS)**, which abstracts the UI components of the Titanium API.\n *\n *  * **Controllers** provide the glue layer between the Model and View components as well as\n *    additional application logic using the **Alloy API** and **Titanium API**.\n *\n * The API documentation provided here is used with Alloy Controllers and Widget Controllers to\n * interact with the View and Model components of the application or widget.\n *\n * For guides on using Alloy, see\n * [Alloy Framework](http://docs.appcelerator.com/platform/latest/#!/guide/Alloy_Framework).\n */\nvar _ = require('/alloy/underscore')._,\n\tBackbone = require('/alloy/backbone'),\n\tCONST = require('/alloy/constants');\n\nexports.version = ALLOY_VERSION;\nexports._ = _;\nexports.Backbone = Backbone;\n\nvar DEFAULT_WIDGET = 'widget';\nvar MW320_CHECK = OS_MOBILEWEB;\nvar IDENTITY_TRANSFORM = OS_ANDROID ? (Ti.UI.createMatrix2D ? Ti.UI.createMatrix2D() : Ti.UI.create2DMatrix()) : undefined;\nvar RESET = {\n\tbottom: null,\n\tleft: null,\n\tright: null,\n\ttop: null,\n\theight: null,\n\twidth: null,\n\tshadowColor: null,\n\tshadowOffset: null,\n\tbackgroundImage: null,\n\tbackgroundRepeat: null,\n\tcenter: null,\n\tlayout: null,\n\tbackgroundSelectedColor: null,\n\tbackgroundSelectedImage: null,\n\n\t// non-null resets\n\topacity: 1.0,\n\ttouchEnabled: true,\n\tenabled: true,\n\thorizontalWrap: true,\n\tzIndex: 0,\n\n\t//##### DISPARITIES #####//\n\n\t// Setting to \"null\" on android works the first time. Leaves the color\n\t// on subsequent calls.\n\tbackgroundColor: OS_ANDROID ? 'transparent' : null,\n\n\t// creates a font slightly different (smaller) than default on iOS\n\t// https://jira.appcelerator.org/browse/TIMOB-14565\n\tfont: null,\n\n\t// Throws an exception on Android if set to null. Works on other platforms.\n\t// https://jira.appcelerator.org/browse/TIMOB-14566\n\tvisible: true,\n\n\t// Setting to \"null\" on android makes text transparent\n\t// https://jira.appcelerator.org/browse/TIMOB-14567\n\tcolor: OS_ANDROID ? '#000' : null,\n\n\t// Android will leave artifact of previous transform unless the identity matrix is\n\t// manually reset.\n\t// https://jira.appcelerator.org/browse/TIMOB-14568\n\t//\n\t// Mobileweb does not respect matrix properties set in the constructor, despite the\n\t// documentation at docs.appcelerator.com indicating that it should.\n\t// https://jira.appcelerator.org/browse/TIMOB-14570\n\ttransform: OS_ANDROID ? IDENTITY_TRANSFORM : null,\n\n\t// Crashes if set to null on anything but Android\n\t// https://jira.appcelerator.org/browse/TIMOB-14571\n\tbackgroundGradient: !OS_ANDROID ? {} : null,\n\n\t// All supported platforms have varying behavior with border properties\n\t// https://jira.appcelerator.org/browse/TIMOB-14573\n\tborderColor: OS_ANDROID ? null : 'transparent',\n\n\t// https://jira.appcelerator.org/browse/TIMOB-14575\n\tborderRadius: OS_IOS ? 0 : null,\n\n\t// https://jira.appcelerator.org/browse/TIMOB-14574\n\tborderWidth: OS_IOS ? 0 : null\n};\n\nif (OS_IOS) {\n\tRESET = _.extend(RESET, {\n\t\tbackgroundLeftCap: 0,\n\t\tbackgroundTopCap: 0\n\t});\n} else if (OS_ANDROID) {\n\tRESET = _.extend(RESET, {\n\t\tbackgroundDisabledColor: null,\n\t\tbackgroundDisabledImage: null,\n\t\tbackgroundFocusedColor: null,\n\t\tbackgroundFocusedImage: null,\n\t\tfocusable: false,\n\t\tkeepScreenOn: false\n\t});\n}\n\nfunction ucfirst(text) {\n\tif (!text) { return text; }\n\treturn text[0].toUpperCase() + text.substr(1);\n}\n\nfunction addNamespace(apiName) {\n\treturn (CONST.IMPLICIT_NAMESPACES[apiName] || CONST.NAMESPACE_DEFAULT) +\n\t\t'.' + apiName;\n}\n\nexports.M = function(name, modelDesc, migrations) {\n\tvar config = (modelDesc || {}).config || {};\n\tvar adapter = config.adapter || {};\n\tvar extendObj = {};\n\tvar extendClass = {};\n\tvar mod;\n\n\tif (adapter.type) {\n\t\tmod = require('/alloy/sync/' + adapter.type);\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\treturn mod.sync(method, model, opts);\n\t\t};\n\t} else {\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\tTi.API.warn('Execution of ' + method + '#sync() function on a model that does not support persistence');\n\t\t\tTi.API.warn('model: ' + JSON.stringify(model.toJSON()));\n\t\t};\n\t}\n\textendObj.defaults = config.defaults;\n\n\t// construct the model based on the current adapter type\n\tif (migrations) { extendClass.migrations = migrations; }\n\n\t// Run the pre model creation code, if any\n\tif (mod && _.isFunction(mod.beforeModelCreate)) {\n\t\tconfig = mod.beforeModelCreate(config, name) || config;\n\t}\n\n\t// Create the Model object\n\tvar Model = Backbone.Model.extend(extendObj, extendClass);\n\tModel.prototype.config = config;\n\n\t// Extend the Model with extendModel(), if defined\n\tif (_.isFunction(modelDesc.extendModel)) {\n\t\tModel = modelDesc.extendModel(Model) || Model;\n\t}\n\n\t// Run the post model creation code, if any\n\tif (mod && _.isFunction(mod.afterModelCreate)) {\n\t\tmod.afterModelCreate(Model, name);\n\t}\n\n\treturn Model;\n};\n\nexports.C = function(name, modelDesc, model) {\n\tvar extendObj = { model: model };\n\tvar config = (model ? model.prototype.config : {}) || {};\n\tvar mod;\n\n\tif (config.adapter && config.adapter.type) {\n\t\tmod = require('/alloy/sync/' + config.adapter.type);\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\treturn mod.sync(method, model, opts);\n\t\t};\n\t} else {\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\tTi.API.warn('Execution of ' + method + '#sync() function on a collection that does not support persistence');\n\t\t\tTi.API.warn('model: ' + JSON.stringify(model.toJSON()));\n\t\t};\n\t}\n\n\tvar Collection = Backbone.Collection.extend(extendObj);\n\tCollection.prototype.config = config;\n\n\t// extend the collection object\n\tif (_.isFunction(modelDesc.extendCollection)) {\n\t\tCollection = modelDesc.extendCollection(Collection) || Collection;\n\t}\n\n\t// do any post collection creation code form the sync adapter\n\tif (mod && _.isFunction(mod.afterCollectionCreate)) {\n\t\tmod.afterCollectionCreate(Collection);\n\t}\n\n\treturn Collection;\n};\n\nexports.UI = {};\nexports.UI.create = function(controller, apiName, opts) {\n\topts = opts || {};\n\n\t// Make sure we have a full api name\n\tvar baseName, ns;\n\tvar parts = apiName.split('.');\n\tif (parts.length === 1) {\n\t\tbaseName = apiName;\n\t\tns = opts.ns || CONST.IMPLICIT_NAMESPACES[baseName] || CONST.NAMESPACE_DEFAULT;\n\t} else if (parts.length > 1) {\n\t\tbaseName = parts[parts.length - 1];\n\t\tns = parts.slice(0,parts.length - 1).join('.');\n\t} else {\n\t\tthrow ('Alloy.UI.create() failed: No API name was given in the second parameter');\n\t}\n\topts.apiName = ns + '.' + baseName;\n\tbaseName = baseName[0].toUpperCase() + baseName.substr(1);\n\n\t// generate the style object\n\tvar style = exports.createStyle(controller, opts);\n\n\t// create the titanium proxy object\n\treturn eval(ns)['create' + baseName](style);\n};\n\nexports.createStyle = function(controller, opts, defaults) {\n\tvar classes, apiName;\n\n\t// If there's no opts, there's no reason to load the style module. Just\n\t// return an empty object.\n\tif (!opts) { return {}; }\n\n\t// make opts.classes an array if it isn't already\n\tif (_.isArray(opts.classes)) {\n\t\tclasses = opts.classes.slice(0);\n\t} else if (_.isString(opts.classes)) {\n\t\tclasses = opts.classes.split(/\\s+/);\n\t} else {\n\t\tclasses = [];\n\t}\n\n\t// give opts.apiName a namespace if it doesn't have one already\n\tapiName = opts.apiName;\n\tif (apiName && apiName.indexOf('.') === -1) {\n\t\tapiName = addNamespace(apiName);\n\t}\n\n\t// TODO: check cached styles based on opts and controller\n\n\t// Load the runtime style for the given controller\n\tvar styleArray;\n\tif (controller && _.isObject(controller)) {\n\t\tstyleArray = require('/alloy/widgets/' + controller.widgetId +\n\t\t\t'/styles/' + controller.name);\n\t} else {\n\t\tstyleArray = require('/alloy/styles/' + controller);\n\t}\n\tvar styleFinal = {};\n\n\t// iterate through all styles\n\tvar i, len;\n\tfor (i = 0, len = styleArray.length; i < len; i++) {\n\t\tvar style = styleArray[i];\n\n\t\t// give the apiName a namespace if necessary\n\t\tvar styleApi = style.key;\n\t\tif (style.isApi && styleApi.indexOf('.') === -1) {\n\t\t\tstyleApi = (CONST.IMPLICIT_NAMESPACES[styleApi] ||\n\t\t\t\tCONST.NAMESPACE_DEFAULT) + '.' + styleApi;\n\t\t}\n\n\t\t// does this style match the given opts?\n\t\tif ((style.isId && opts.id && style.key === opts.id) ||\n\t\t\t(style.isClass && _.contains(classes, style.key))) {\n\t\t\t// do nothing here, keep on processing\n\t\t} else if (style.isApi) {\n\t\t\tif (style.key.indexOf('.') === -1) {\n\t\t\t\tstyle.key = addNamespace(style.key);\n\t\t\t}\n\t\t\tif (style.key !== apiName) { continue; }\n\t\t} else {\n\t\t\t// no matches, skip this style\n\t\t\tcontinue;\n\t\t}\n\n\t\t// can we clear out any form factor queries?\n\t\tif (style.queries && style.queries.formFactor &&\n\t\t\t!exports[style.queries.formFactor]) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// process runtime custom queries\n\t\tif (style.queries && style.queries.if &&\n\t\t\t(style.queries.if.trim().toLowerCase() === 'false' ||\n\t\t\t(style.queries.if.indexOf('Alloy.Globals') !== -1 &&\n\t\t\texports.Globals[style.queries.if.split('.')[2]] === false))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge this style into the existing style object\n\t\texports.deepExtend(true, styleFinal, style.style);\n\t}\n\n\t// TODO: cache the style based on the opts and controller\n\n\t// Merge remaining extra style properties from opts, if any\n\tvar extraStyle = _.omit(opts, [\n\t\tCONST.CLASS_PROPERTY,\n\t\tCONST.APINAME_PROPERTY\n\t]);\n\texports.deepExtend(true, styleFinal, extraStyle);\n\tstyleFinal[CONST.CLASS_PROPERTY] = classes;\n\tstyleFinal[CONST.APINAME_PROPERTY] = apiName;\n\n\tif (MW320_CHECK) { delete styleFinal[CONST.APINAME_PROPERTY]; }\n\n\treturn defaults ? _.defaults(styleFinal, defaults) : styleFinal;\n};\n\nfunction processStyle(controller, proxy, classes, opts, defaults) {\n\topts = opts || {};\n\topts.classes = classes;\n\tif (proxy.apiName) { opts.apiName = proxy.apiName; }\n\tif (proxy.id) { opts.id = proxy.id; }\n\tproxy.applyProperties(exports.createStyle(controller, opts, defaults));\n\tif (OS_ANDROID) { proxy.classes = classes; }\n}\n\nexports.addClass = function(controller, proxy, classes, opts) {\n\n\t// make sure we actually have classes to add\n\tif (!classes) {\n\t\tif (opts) {\n\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\tproxy.applyProperties(opts);\n\t\t}\n\t\treturn;\n\t} else {\n\t\t// create a union of the existing classes with the new one(s)\n\t\tvar pClasses = proxy[CONST.CLASS_PROPERTY] || [];\n\t\tvar beforeLen = pClasses.length;\n\t\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\t\tvar newClasses = _.union(pClasses, classes || []);\n\n\t\t// make sure we actually added classes before processing styles\n\t\tif (beforeLen === newClasses.length) {\n\t\t\tif (opts) {\n\t\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\t\tproxy.applyProperties(opts);\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tprocessStyle(controller, proxy, newClasses, opts);\n\t\t}\n\t}\n};\n\nexports.removeClass = function(controller, proxy, classes, opts) {\n\tclasses = classes || [];\n\tvar pClasses = proxy[CONST.CLASS_PROPERTY] || [];\n\tvar beforeLen = pClasses.length;\n\n\t// make sure there's classes to remove before processing\n\tif (!beforeLen || !classes.length) {\n\t\tif (opts) {\n\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\tproxy.applyProperties(opts);\n\t\t}\n\t\treturn;\n\t} else {\n\t\t// remove the given class(es)\n\t\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\t\tvar newClasses = _.difference(pClasses, classes);\n\n\t\t// make sure there was actually a difference before processing\n\t\tif (beforeLen === newClasses.length) {\n\t\t\tif (opts) {\n\t\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\t\tproxy.applyProperties(opts);\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tprocessStyle(controller, proxy, newClasses, opts, RESET);\n\t\t}\n\t}\n};\n\nexports.resetClass = function(controller, proxy, classes, opts) {\n\tclasses = classes || [];\n\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\tprocessStyle(controller, proxy, classes, opts, RESET);\n};\n\n/**\n * @method createWidget\n * Factory method for instantiating a widget controller. Creates and returns an instance of the\n * named widget.\n * @param {String} id Id of widget to instantiate.\n * @param {String} [name=\"widget\"] Name of the view within the widget to instantiate ('widget' by default)\n * @param {Object} [args] Arguments to pass to the widget.\n * @return {Alloy.Controller} Alloy widget controller object.\n */\nexports.createWidget = function(id, name, args) {\n\tif (typeof name !== 'undefined' && name !== null &&\n\t\t_.isObject(name) && !_.isString(name)) {\n\t\targs = name;\n\t\tname = DEFAULT_WIDGET;\n\t}\n\treturn new (require('/alloy/widgets/' + id + '/controllers/' + (name || DEFAULT_WIDGET).replace(/^\\.?\\//, '')).default)(args);\n};\n\n/**\n * @method createController\n * Factory method for instantiating a controller. Creates and returns an instance of the\n * named controller.\n * @param {String} name Name of controller to instantiate.\n * @param {Object} [args] Arguments to pass to the controller.\n * @return {Alloy.Controller} Alloy controller object.\n */\nexports.createController = function(name, args) {\n\treturn new (require('/alloy/controllers/' + name.replace(/^\\.?\\//, '')).default)(args);\n};\n\n/**\n * @method createModel\n * Factory method for instantiating a Backbone Model object. Creates and returns an instance of the\n * named model.\n *\n * See [Backbone.Model](http://docs.appcelerator.com/backbone/0.9.2/#Model) in the Backbone.js documentation for\n * information on the methods and properties provided by the Model object.\n * @param {String} name Name of model to instantiate.\n * @param {Object} [args] Arguments to pass to the model.\n * @return {Backbone.Model} Backbone model object.\n */\nexports.createModel = function(name, args) {\n\treturn new (require('/alloy/models/' + name).Model)(args);\n};\n\n/**\n * @method createCollection\n * Factory method for instantiating a Backbone collection of model objects. Creates and returns a\n * collection for holding the named type of model objects.\n *\n * See [Backbone.Collection](http://docs.appcelerator.com/backbone/0.9.2/#Collection) in the Backbone.js\n * documentation for  information on the methods and  properties provided by the\n * Collection object.\n * @param {String} name Name of model to hold in this collection.\n * @param {Object} [args] Arguments to pass to the collection.\n * @return {Backbone.Collection} Backbone collection object.\n */\nexports.createCollection = function(name, args) {\n\treturn new (require('/alloy/models/' + name).Collection)(args);\n};\n\nfunction isTabletFallback() {\n\treturn Math.min(\n\t\tTi.Platform.displayCaps.platformHeight,\n\t\tTi.Platform.displayCaps.platformWidth\n\t) >= 700;\n}\n\n/**\n * @property {Boolean} isTablet\n * `true` if the current device is a tablet.\n *\n */\nexports.isTablet = (function() {\n\tif (OS_IOS) {\n\t\treturn Ti.Platform.osname === 'ipad';\n\t} else if (OS_ANDROID) {\n\t\tvar psc = Ti.Platform.Android.physicalSizeCategory;\n\t\treturn psc === Ti.Platform.Android.PHYSICAL_SIZE_CATEGORY_LARGE ||\n\t\t\tpsc === Ti.Platform.Android.PHYSICAL_SIZE_CATEGORY_XLARGE;\n\t} else if (OS_MOBILEWEB) {\n\t\treturn Math.min(\n\t\t\tTi.Platform.displayCaps.platformHeight,\n\t\t\tTi.Platform.displayCaps.platformWidth\n\t\t) >= 400;\n\t// } else if (OS_BLACKBERRY) {\n\t// \t// Tablets not currently supported by BB TiSDK\n\t// \t// https://jira.appcelerator.org/browse/TIMOB-13225\n\t// \treturn false;\n\t} else if (OS_WINDOWS) {\n\t\t// per http://www.extremetech.com/computing/139768-windows-8-smartphones-and-windows-phone-8-tablets\n\t\t// tablets should be >= 1024x768 and phones could be lower, though current phones are running at\n\t\t// the 1280x720 range and higher\n\t\treturn Math.max(\n\t\t\tTi.Platform.displayCaps.platformHeight,\n\t\t\tTi.Platform.displayCaps.platformWidth\n\t\t) >= 1024;\n\t} else {\n\t\treturn isTabletFallback();\n\t}\n})();\n\n/**\n * @property {Boolean} isHandheld\n * `true` if the current device is a handheld device (not a tablet).\n *\n */\nexports.isHandheld = !exports.isTablet;\n\n/**\n * @property {Object} Globals\n * An object for storing globally accessible variables and functions.\n * Alloy.Globals is accessible in any controller in your app:\n *\n *     Alloy.Globals.someGlobalObject = { key: 'value' };\n *     Alloy.Globals.someGlobalFunction = function(){};\n *\n * Alloy.Globals can be accessed in other non-controller Javascript files\n * like this:\n *\n *     var theObject = require('alloy').Globals.someGlobalObject;\n *\n */\nexports.Globals = {};\n\n/**\n * @property {Object} Models\n * An object for storing globally accessible Alloy models. Singleton models\n * created via markup will be stored on this object.\n *\n *     <Model src=\"myModel\"/>\n *\n * The above markup would effectively generate the following code:\n *\n *     Alloy.Models.myModel = Alloy.createModel('MyModel');\n *\n * Alloy.Models.myModel would then be accessible in any controller in your app.\n *\n */\nexports.Models = {};\n\n/*\n * Creates a singleton instance of a Model based on the given model, or\n * returns an existing instance if one has already been created.\n * Documented in docs/apidoc/model.js for docs site.\n */\nexports.Models.instance = function(name) {\n\treturn exports.Models[name] || (exports.Models[name] = exports.createModel(name));\n};\n\n/**\n * @property {Object} Collections\n * An object for storing globally accessible Alloy collections. Singleton collections\n * created via markup will be stored on this object.\n *\n *     <Collection src=\"myModel\"/>\n *\n * The above markup would effectively generate the following code:\n *\n *     Alloy.Collections.myModel = Alloy.createCollection('MyModel');\n *\n * Alloy.Collections.myModel would then be accessible in any controller in your app.\n *\n */\nexports.Collections = {};\n\n/*\n * Creates a singleton instance of a Collection based on the given model, or\n * returns an existing instance if one has already been created.\n * Documented in docs/apidoc/collection.js for docs site.\n */\nexports.Collections.instance = function(name) {\n\treturn exports.Collections[name] || (exports.Collections[name] = exports.createCollection(name));\n};\n\n/**\n * @property {Object} CFG\n * An object that stores Alloy configuration values as defined in your app's\n * app/config.json file. Here's what a typical config.json file might look\n * like in an Alloy app.\n *\n *     {\n *         \"global\": { \"key\": \"defaultValue\", \"anotherKey\": 12345 },\n *         \"env:development\": {},\n *         \"env:test\": {},\n *         \"env:production\": {},\n *         \"os:ios\": { \"key\": \"iosValue\" },\n *         \"os:android\": { \"key\": \"androidValue\" },\n *         \"dependencies\": {}\n *     }\n *\n * If this app was compiled for iOS, the Alloy.CFG would look like this:\n *\n *     Alloy.CFG = {\n *         \"key\": \"iosValue\",\n *         \"anotherKey\": 12345\n *     }\n *\n * Alloy.CFG is accessible in any controller in your app, and can be accessed\n * in other non-controller Javascript files like this:\n *\n *     var theKey = require('alloy').CFG.key;\n *\n */\nexports.CFG = require('/alloy/CFG');\n\nif (OS_ANDROID) {\n\texports.Android = {};\n\texports.Android.menuItemCreateArgs = ['itemId', 'groupId', 'title', 'order', 'actionView', 'checkable', 'checked', 'enabled', 'icon', 'showAsAction', 'titleCondensed', 'visible'];\n}\n\n/*\n * Adapted version of node.extend https://www.npmjs.org/package/node.extend\n *\n * Original copyright:\n *\n * node.extend\n * Copyright 2011, John Resig\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n *\n * @fileoverview\n * Port of jQuery.extend that actually works on node.js\n */\nexports.deepExtend = function() {\n\tvar target = arguments[0] || {};\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\tvar options, name, src, copy, copy_is_array, clone;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== 'object' && !_.isFunction(target)) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\toptions = arguments[i];\n\t\tif (options != null) {\n\t\t\tif (typeof options === 'string') {\n\t\t\t\toptions = options.split('');\n\t\t\t}\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deep && copy && !_.isFunction(copy) && _.isObject(copy) && ((copy_is_array = _.isArray(copy)) || !_.has(copy, 'apiName'))) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (copy_is_array) {\n\t\t\t\t\t\tcopy_is_array = false;\n\t\t\t\t\t\tclone = src && _.isArray(src) ? src : [];\n\t\t\t\t\t} else if (_.isDate(copy)) {\n\t\t\t\t\t\tclone = new Date(copy.valueOf());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && _.isObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = exports.deepExtend(deep, clone, copy);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n"]}]}