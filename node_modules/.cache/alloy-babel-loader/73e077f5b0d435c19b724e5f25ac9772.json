{"remainingRequest":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js??ref--4-2!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/lib/alloy/sync/properties.js","dependencies":[{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/lib/alloy/sync/properties.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIEFsbG95ID0gcmVxdWlyZSgnL2FsbG95JyksCiAgICBfID0gcmVxdWlyZSgnL2FsbG95L3VuZGVyc2NvcmUnKS5fLAogICAgVEFQID0gVGkuQXBwLlByb3BlcnRpZXM7CgpmdW5jdGlvbiBTNCgpIHsKICByZXR1cm4gKCgxICsgTWF0aC5yYW5kb20oKSkgKiAweDEwMDAwIHwgMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTsKfQoKZnVuY3Rpb24gZ3VpZCgpIHsKICByZXR1cm4gUzQoKSArIFM0KCkgKyAnLScgKyBTNCgpICsgJy0nICsgUzQoKSArICctJyArIFM0KCkgKyAnLScgKyBTNCgpICsgUzQoKSArIFM0KCk7Cn0KCmZ1bmN0aW9uIFN5bmMobWV0aG9kLCBtb2RlbCwgb3B0cykgewogIHZhciBwcmVmaXggPSBtb2RlbC5jb25maWcuYWRhcHRlci5jb2xsZWN0aW9uX25hbWUgPyBtb2RlbC5jb25maWcuYWRhcHRlci5jb2xsZWN0aW9uX25hbWUgOiAnZGVmYXVsdCc7CiAgdmFyIHJlZ2V4ID0gbmV3IFJlZ0V4cCgnXignICsgcHJlZml4ICsgJylcXC0oLispJCcpOwogIHZhciByZXNwID0gbnVsbDsKCiAgaWYgKG1ldGhvZCA9PT0gJ3JlYWQnKSB7CiAgICBpZiAobW9kZWwgaW5zdGFuY2VvZiBCYWNrYm9uZS5Db2xsZWN0aW9uKSB7CiAgICAgIC8vIGlzIGNvbGxlY3Rpb24KICAgICAgdmFyIGxpc3QgPSBbXTsKCiAgICAgIF8uZWFjaChUQVAubGlzdFByb3BlcnRpZXMoKSwgZnVuY3Rpb24gKHByb3ApIHsKICAgICAgICB2YXIgbWF0Y2ggPSBwcm9wLm1hdGNoKHJlZ2V4KTsKCiAgICAgICAgaWYgKG1hdGNoICE9PSBudWxsKSB7CiAgICAgICAgICBsaXN0LnB1c2goVEFQLmdldE9iamVjdChwcm9wKSk7CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHJlc3AgPSBsaXN0OwogICAgfSBlbHNlIHsKICAgICAgLy8gaXMgbW9kZWwKICAgICAgdmFyIG9iaiA9IFRBUC5nZXRPYmplY3QocHJlZml4ICsgJy0nICsgbW9kZWwuaWQpOwogICAgICBtb2RlbC5zZXQob2JqKTsKICAgICAgcmVzcCA9IG1vZGVsLnRvSlNPTigpOwogICAgfQogIH0gZWxzZSBpZiAobWV0aG9kID09PSAnY3JlYXRlJyB8fCBtZXRob2QgPT09ICd1cGRhdGUnKSB7CiAgICBpZiAoIW1vZGVsLmlkKSB7CiAgICAgIG1vZGVsLmlkID0gZ3VpZCgpOwogICAgICBtb2RlbC5zZXQobW9kZWwuaWRBdHRyaWJ1dGUsIG1vZGVsLmlkKTsKICAgIH0KCiAgICBUQVAuc2V0T2JqZWN0KHByZWZpeCArICctJyArIG1vZGVsLmlkLCBtb2RlbC50b0pTT04oKSB8fCB7fSk7CiAgICByZXNwID0gbW9kZWwudG9KU09OKCk7CiAgfSBlbHNlIGlmIChtZXRob2QgPT09ICdkZWxldGUnKSB7CiAgICBUQVAucmVtb3ZlUHJvcGVydHkocHJlZml4ICsgJy0nICsgbW9kZWwuaWQpOwogICAgbW9kZWwuY2xlYXIoKTsKICAgIHJlc3AgPSBtb2RlbC50b0pTT04oKTsKICB9IC8vIHByb2Nlc3Mgc3VjY2Vzcy9lcnJvciBoYW5kbGVycywgaWYgcHJlc2VudAoKCiAgaWYgKHJlc3ApIHsKICAgIGlmIChfLmlzRnVuY3Rpb24ob3B0cy5zdWNjZXNzKSkgewogICAgICBvcHRzLnN1Y2Nlc3MocmVzcCk7CiAgICB9CgogICAgaWYgKG1ldGhvZCA9PT0gJ3JlYWQnKSB7CiAgICAgIG1vZGVsLnRyaWdnZXIoJ2ZldGNoJyk7CiAgICB9CiAgfSBlbHNlIHsKICAgIGlmIChfLmlzRnVuY3Rpb24ob3B0cy5lcnJvcikpIHsKICAgICAgb3B0cy5lcnJvcihyZXNwKTsKICAgIH0KICB9Cn0KCm1vZHVsZS5leHBvcnRzLnN5bmMgPSBTeW5jOwoKbW9kdWxlLmV4cG9ydHMuYmVmb3JlTW9kZWxDcmVhdGUgPSBmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8gbWFrZSBzdXJlIHdlIGhhdmUgYSBwb3B1bGF0ZWQgbW9kZWwgb2JqZWN0CiAgY29uZmlnID0gY29uZmlnIHx8IHt9OwogIGNvbmZpZy5jb2x1bW5zID0gY29uZmlnLmNvbHVtbnMgfHwge307CiAgY29uZmlnLmRlZmF1bHRzID0gY29uZmlnLmRlZmF1bHRzIHx8IHt9OyAvLyBnaXZlIGl0IGEgZGVmYXVsdCBpZCBpZiBpdCBkb2Vzbid0IGV4aXN0IGFscmVhZHkKCiAgaWYgKHR5cGVvZiBjb25maWcuY29sdW1ucy5pZCA9PT0gJ3VuZGVmaW5lZCcgfHwgY29uZmlnLmNvbHVtbnMuaWQgPT09IG51bGwpIHsKICAgIGNvbmZpZy5jb2x1bW5zLmlkID0gJ1N0cmluZyc7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9Ow=="},{"version":3,"sources":["/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/lib/alloy/sync/properties.js"],"names":["Alloy","require","_","TAP","Ti","App","Properties","S4","Math","random","toString","substring","guid","Sync","method","model","opts","prefix","config","adapter","collection_name","regex","RegExp","resp","Backbone","Collection","list","each","listProperties","prop","match","push","getObject","obj","id","set","toJSON","idAttribute","setObject","removeProperty","clear","isFunction","success","trigger","error","module","exports","sync","beforeModelCreate","columns","defaults"],"mappings":"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","sourcesContent":["var Alloy = require('/alloy'),\n\t_ = require('/alloy/underscore')._,\n\tTAP = Ti.App.Properties;\n\nfunction S4() {\n\treturn (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n}\n\nfunction guid() {\n\treturn (S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + S4() + S4() + S4());\n}\n\nfunction Sync(method, model, opts) {\n\tvar prefix = model.config.adapter.collection_name ? model.config.adapter.collection_name : 'default';\n\tvar regex = new RegExp('^(' + prefix + ')\\\\-(.+)$');\n\tvar resp = null;\n\n\tif (method === 'read') {\n\t\tif (model instanceof Backbone.Collection) {\n\t\t\t// is collection\n\t\t\tvar list = [];\n\t\t\t_.each(TAP.listProperties(), function(prop) {\n\t\t\t\tvar match = prop.match(regex);\n\t\t\t\tif (match !== null) {\n\t\t\t\t\tlist.push(TAP.getObject(prop));\n\t\t\t\t}\n\t\t\t});\n\t\t\tresp = list;\n\t\t} else {\n\t\t\t// is model\n\t\t\tvar obj = TAP.getObject(prefix + '-' + model.id);\n\t\t\tmodel.set(obj);\n\t\t\tresp = model.toJSON();\n\t\t}\n\t} else if (method === 'create' || method === 'update') {\n\t\tif (!model.id) {\n\t\t\tmodel.id = guid();\n\t\t\tmodel.set(model.idAttribute, model.id);\n\t\t}\n\t\tTAP.setObject(prefix + '-' + model.id, model.toJSON() || {});\n\t\tresp = model.toJSON();\n\t} else if (method === 'delete') {\n\t\tTAP.removeProperty(prefix + '-' + model.id);\n\t\tmodel.clear();\n\t\tresp = model.toJSON();\n\t}\n\n\t// process success/error handlers, if present\n\tif (resp) {\n\t\tif (_.isFunction(opts.success)) { opts.success(resp); }\n\t\tif (method === 'read') { model.trigger('fetch'); }\n\t} else {\n\t\tif (_.isFunction(opts.error)) { opts.error(resp); }\n\t}\n}\n\nmodule.exports.sync = Sync;\nmodule.exports.beforeModelCreate = function(config) {\n\t// make sure we have a populated model object\n\tconfig = config || {};\n\tconfig.columns = config.columns || {};\n\tconfig.defaults = config.defaults || {};\n\n\t// give it a default id if it doesn't exist already\n\tif (typeof config.columns.id === 'undefined' || config.columns.id === null) {\n\t\tconfig.columns.id = 'String';\n\t}\n\n\treturn config;\n};\n"]}]}