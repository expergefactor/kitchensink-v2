{"remainingRequest":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js??ref--4-1!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js??ref--4-2!/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js","dependencies":[{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyoqCiAqIEBjbGFzcyBBbGxveQogKiBUb3AtbGV2ZWwgbW9kdWxlIGZvciBBbGxveSBmdW5jdGlvbnMuCiAqCiAqIEFsbG95IGlzIGFuIGFwcGxpY2F0aW9uIGZyYW1ld29yayBidWlsdCBvbiB0b3Agb2YgdGhlIFRpdGFuaXVtIFNESyBkZXNpZ25lZCB0byBoZWxwIHJhcGlkbHkKICogZGV2ZWxvcCBoaWdoIHF1YWxpdHkgYXBwbGljYXRpb25zIGFuZCByZWR1Y2UgbWFpbnRlbmFuY2UuCiAqCiAqIEFsbG95IHVzZXMgdGhlIG1vZGVsLXZpZXctY29udHJvbGxlciBhcmNoaXRlY3R1cmUgdG8gc2VwYXJhdGUgdGhlIGFwcGxpY2F0aW9uIGludG8gdGhyZWUKICogY29tcG9uZW50czoKICoKICogICogKipNb2RlbHMqKiBwcm92aWRlIHRoZSBkYXRhIG9mIHRoZSBhcHBsaWNhdGlvbi4gQWxsb3kgdXRpbGl6ZXMgKipCYWNrYm9uZSBNb2RlbCBhbmQgQ29sbGVjdGlvbioqCiAqICAgICBvYmplY3RzIGZvciB0aGlzIGZ1bmN0aW9uYWxpdHkuCiAqCiAqICAqICoqVmlld3MqKiBwcm92aWRlIHRoZSBVSSBjb21wb25lbnRzIHRvIGludGVyYWN0IHdpdGggdGhlIGFwcGxpY2F0aW9uLCB3cml0dGVuIHVzaW5nICoqWE1MIG1hcmt1cCoqCiAqICAgIGFuZCAqKlRpdGFuaXVtIFN0eWxlc2hlZXRzIChUU1MpKiosIHdoaWNoIGFic3RyYWN0cyB0aGUgVUkgY29tcG9uZW50cyBvZiB0aGUgVGl0YW5pdW0gQVBJLgogKgogKiAgKiAqKkNvbnRyb2xsZXJzKiogcHJvdmlkZSB0aGUgZ2x1ZSBsYXllciBiZXR3ZWVuIHRoZSBNb2RlbCBhbmQgVmlldyBjb21wb25lbnRzIGFzIHdlbGwgYXMKICogICAgYWRkaXRpb25hbCBhcHBsaWNhdGlvbiBsb2dpYyB1c2luZyB0aGUgKipBbGxveSBBUEkqKiBhbmQgKipUaXRhbml1bSBBUEkqKi4KICoKICogVGhlIEFQSSBkb2N1bWVudGF0aW9uIHByb3ZpZGVkIGhlcmUgaXMgdXNlZCB3aXRoIEFsbG95IENvbnRyb2xsZXJzIGFuZCBXaWRnZXQgQ29udHJvbGxlcnMgdG8KICogaW50ZXJhY3Qgd2l0aCB0aGUgVmlldyBhbmQgTW9kZWwgY29tcG9uZW50cyBvZiB0aGUgYXBwbGljYXRpb24gb3Igd2lkZ2V0LgogKgogKiBGb3IgZ3VpZGVzIG9uIHVzaW5nIEFsbG95LCBzZWUKICogW0FsbG95IEZyYW1ld29ya10oaHR0cDovL2RvY3MuYXBwY2VsZXJhdG9yLmNvbS9wbGF0Zm9ybS9sYXRlc3QvIyEvZ3VpZGUvQWxsb3lfRnJhbWV3b3JrKS4KICovCnZhciBfID0gcmVxdWlyZSgnL2FsbG95L3VuZGVyc2NvcmUnKS5fLAogICAgQmFja2JvbmUgPSByZXF1aXJlKCcvYWxsb3kvYmFja2JvbmUnKSwKICAgIENPTlNUID0gcmVxdWlyZSgnL2FsbG95L2NvbnN0YW50cycpOwoKZXhwb3J0cy52ZXJzaW9uID0gQUxMT1lfVkVSU0lPTjsKZXhwb3J0cy5fID0gXzsKZXhwb3J0cy5CYWNrYm9uZSA9IEJhY2tib25lOwp2YXIgREVGQVVMVF9XSURHRVQgPSAnd2lkZ2V0JzsKdmFyIE1XMzIwX0NIRUNLID0gT1NfTU9CSUxFV0VCOwp2YXIgSURFTlRJVFlfVFJBTlNGT1JNID0gdHJ1ZSA/IFRpLlVJLmNyZWF0ZU1hdHJpeDJEID8gVGkuVUkuY3JlYXRlTWF0cml4MkQoKSA6IFRpLlVJLmNyZWF0ZTJETWF0cml4KCkgOiB1bmRlZmluZWQ7CnZhciBSRVNFVCA9IHsKICBib3R0b206IG51bGwsCiAgbGVmdDogbnVsbCwKICByaWdodDogbnVsbCwKICB0b3A6IG51bGwsCiAgaGVpZ2h0OiBudWxsLAogIHdpZHRoOiBudWxsLAogIHNoYWRvd0NvbG9yOiBudWxsLAogIHNoYWRvd09mZnNldDogbnVsbCwKICBiYWNrZ3JvdW5kSW1hZ2U6IG51bGwsCiAgYmFja2dyb3VuZFJlcGVhdDogbnVsbCwKICBjZW50ZXI6IG51bGwsCiAgbGF5b3V0OiBudWxsLAogIGJhY2tncm91bmRTZWxlY3RlZENvbG9yOiBudWxsLAogIGJhY2tncm91bmRTZWxlY3RlZEltYWdlOiBudWxsLAogIC8vIG5vbi1udWxsIHJlc2V0cwogIG9wYWNpdHk6IDEuMCwKICB0b3VjaEVuYWJsZWQ6IHRydWUsCiAgZW5hYmxlZDogdHJ1ZSwKICBob3Jpem9udGFsV3JhcDogdHJ1ZSwKICB6SW5kZXg6IDAsCiAgLy8jIyMjIyBESVNQQVJJVElFUyAjIyMjIy8vCiAgLy8gU2V0dGluZyB0byAibnVsbCIgb24gYW5kcm9pZCB3b3JrcyB0aGUgZmlyc3QgdGltZS4gTGVhdmVzIHRoZSBjb2xvcgogIC8vIG9uIHN1YnNlcXVlbnQgY2FsbHMuCiAgYmFja2dyb3VuZENvbG9yOiB0cnVlID8gJ3RyYW5zcGFyZW50JyA6IG51bGwsCiAgLy8gY3JlYXRlcyBhIGZvbnQgc2xpZ2h0bHkgZGlmZmVyZW50IChzbWFsbGVyKSB0aGFuIGRlZmF1bHQgb24gaU9TCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTY1CiAgZm9udDogbnVsbCwKICAvLyBUaHJvd3MgYW4gZXhjZXB0aW9uIG9uIEFuZHJvaWQgaWYgc2V0IHRvIG51bGwuIFdvcmtzIG9uIG90aGVyIHBsYXRmb3Jtcy4KICAvLyBodHRwczovL2ppcmEuYXBwY2VsZXJhdG9yLm9yZy9icm93c2UvVElNT0ItMTQ1NjYKICB2aXNpYmxlOiB0cnVlLAogIC8vIFNldHRpbmcgdG8gIm51bGwiIG9uIGFuZHJvaWQgbWFrZXMgdGV4dCB0cmFuc3BhcmVudAogIC8vIGh0dHBzOi8vamlyYS5hcHBjZWxlcmF0b3Iub3JnL2Jyb3dzZS9USU1PQi0xNDU2NwogIGNvbG9yOiB0cnVlID8gJyMwMDAnIDogbnVsbCwKICAvLyBBbmRyb2lkIHdpbGwgbGVhdmUgYXJ0aWZhY3Qgb2YgcHJldmlvdXMgdHJhbnNmb3JtIHVubGVzcyB0aGUgaWRlbnRpdHkgbWF0cml4IGlzCiAgLy8gbWFudWFsbHkgcmVzZXQuCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTY4CiAgLy8KICAvLyBNb2JpbGV3ZWIgZG9lcyBub3QgcmVzcGVjdCBtYXRyaXggcHJvcGVydGllcyBzZXQgaW4gdGhlIGNvbnN0cnVjdG9yLCBkZXNwaXRlIHRoZQogIC8vIGRvY3VtZW50YXRpb24gYXQgZG9jcy5hcHBjZWxlcmF0b3IuY29tIGluZGljYXRpbmcgdGhhdCBpdCBzaG91bGQuCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTcwCiAgdHJhbnNmb3JtOiB0cnVlID8gSURFTlRJVFlfVFJBTlNGT1JNIDogbnVsbCwKICAvLyBDcmFzaGVzIGlmIHNldCB0byBudWxsIG9uIGFueXRoaW5nIGJ1dCBBbmRyb2lkCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTcxCiAgYmFja2dyb3VuZEdyYWRpZW50OiAhdHJ1ZSA/IHt9IDogbnVsbCwKICAvLyBBbGwgc3VwcG9ydGVkIHBsYXRmb3JtcyBoYXZlIHZhcnlpbmcgYmVoYXZpb3Igd2l0aCBib3JkZXIgcHJvcGVydGllcwogIC8vIGh0dHBzOi8vamlyYS5hcHBjZWxlcmF0b3Iub3JnL2Jyb3dzZS9USU1PQi0xNDU3MwogIGJvcmRlckNvbG9yOiB0cnVlID8gbnVsbCA6ICd0cmFuc3BhcmVudCcsCiAgLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTE0NTc1CiAgYm9yZGVyUmFkaXVzOiBmYWxzZSA/IDAgOiBudWxsLAogIC8vIGh0dHBzOi8vamlyYS5hcHBjZWxlcmF0b3Iub3JnL2Jyb3dzZS9USU1PQi0xNDU3NAogIGJvcmRlcldpZHRoOiBmYWxzZSA/IDAgOiBudWxsCn07CgppZiAoZmFsc2UpIHsKICBSRVNFVCA9IF8uZXh0ZW5kKFJFU0VULCB7CiAgICBiYWNrZ3JvdW5kTGVmdENhcDogMCwKICAgIGJhY2tncm91bmRUb3BDYXA6IDAKICB9KTsKfSBlbHNlIGlmICh0cnVlKSB7CiAgUkVTRVQgPSBfLmV4dGVuZChSRVNFVCwgewogICAgYmFja2dyb3VuZERpc2FibGVkQ29sb3I6IG51bGwsCiAgICBiYWNrZ3JvdW5kRGlzYWJsZWRJbWFnZTogbnVsbCwKICAgIGJhY2tncm91bmRGb2N1c2VkQ29sb3I6IG51bGwsCiAgICBiYWNrZ3JvdW5kRm9jdXNlZEltYWdlOiBudWxsLAogICAgZm9jdXNhYmxlOiBmYWxzZSwKICAgIGtlZXBTY3JlZW5PbjogZmFsc2UKICB9KTsKfQoKZnVuY3Rpb24gdWNmaXJzdCh0ZXh0KSB7CiAgaWYgKCF0ZXh0KSB7CiAgICByZXR1cm4gdGV4dDsKICB9CgogIHJldHVybiB0ZXh0WzBdLnRvVXBwZXJDYXNlKCkgKyB0ZXh0LnN1YnN0cigxKTsKfQoKZnVuY3Rpb24gYWRkTmFtZXNwYWNlKGFwaU5hbWUpIHsKICByZXR1cm4gKENPTlNULklNUExJQ0lUX05BTUVTUEFDRVNbYXBpTmFtZV0gfHwgQ09OU1QuTkFNRVNQQUNFX0RFRkFVTFQpICsgJy4nICsgYXBpTmFtZTsKfQoKZXhwb3J0cy5NID0gZnVuY3Rpb24gKG5hbWUsIG1vZGVsRGVzYywgbWlncmF0aW9ucykgewogIHZhciBjb25maWcgPSAobW9kZWxEZXNjIHx8IHt9KS5jb25maWcgfHwge307CiAgdmFyIGFkYXB0ZXIgPSBjb25maWcuYWRhcHRlciB8fCB7fTsKICB2YXIgZXh0ZW5kT2JqID0ge307CiAgdmFyIGV4dGVuZENsYXNzID0ge307CiAgdmFyIG1vZDsKCiAgaWYgKGFkYXB0ZXIudHlwZSkgewogICAgbW9kID0gcmVxdWlyZSgnL2FsbG95L3N5bmMvJyArIGFkYXB0ZXIudHlwZSk7CgogICAgZXh0ZW5kT2JqLnN5bmMgPSBmdW5jdGlvbiAobWV0aG9kLCBtb2RlbCwgb3B0cykgewogICAgICByZXR1cm4gbW9kLnN5bmMobWV0aG9kLCBtb2RlbCwgb3B0cyk7CiAgICB9OwogIH0gZWxzZSB7CiAgICBleHRlbmRPYmouc3luYyA9IGZ1bmN0aW9uIChtZXRob2QsIG1vZGVsLCBvcHRzKSB7CiAgICAgIFRpLkFQSS53YXJuKCdFeGVjdXRpb24gb2YgJyArIG1ldGhvZCArICcjc3luYygpIGZ1bmN0aW9uIG9uIGEgbW9kZWwgdGhhdCBkb2VzIG5vdCBzdXBwb3J0IHBlcnNpc3RlbmNlJyk7CiAgICAgIFRpLkFQSS53YXJuKCdtb2RlbDogJyArIEpTT04uc3RyaW5naWZ5KG1vZGVsLnRvSlNPTigpKSk7CiAgICB9OwogIH0KCiAgZXh0ZW5kT2JqLmRlZmF1bHRzID0gY29uZmlnLmRlZmF1bHRzOyAvLyBjb25zdHJ1Y3QgdGhlIG1vZGVsIGJhc2VkIG9uIHRoZSBjdXJyZW50IGFkYXB0ZXIgdHlwZQoKICBpZiAobWlncmF0aW9ucykgewogICAgZXh0ZW5kQ2xhc3MubWlncmF0aW9ucyA9IG1pZ3JhdGlvbnM7CiAgfSAvLyBSdW4gdGhlIHByZSBtb2RlbCBjcmVhdGlvbiBjb2RlLCBpZiBhbnkKCgogIGlmIChtb2QgJiYgXy5pc0Z1bmN0aW9uKG1vZC5iZWZvcmVNb2RlbENyZWF0ZSkpIHsKICAgIGNvbmZpZyA9IG1vZC5iZWZvcmVNb2RlbENyZWF0ZShjb25maWcsIG5hbWUpIHx8IGNvbmZpZzsKICB9IC8vIENyZWF0ZSB0aGUgTW9kZWwgb2JqZWN0CgoKICB2YXIgTW9kZWwgPSBCYWNrYm9uZS5Nb2RlbC5leHRlbmQoZXh0ZW5kT2JqLCBleHRlbmRDbGFzcyk7CiAgTW9kZWwucHJvdG90eXBlLmNvbmZpZyA9IGNvbmZpZzsgLy8gRXh0ZW5kIHRoZSBNb2RlbCB3aXRoIGV4dGVuZE1vZGVsKCksIGlmIGRlZmluZWQKCiAgaWYgKF8uaXNGdW5jdGlvbihtb2RlbERlc2MuZXh0ZW5kTW9kZWwpKSB7CiAgICBNb2RlbCA9IG1vZGVsRGVzYy5leHRlbmRNb2RlbChNb2RlbCkgfHwgTW9kZWw7CiAgfSAvLyBSdW4gdGhlIHBvc3QgbW9kZWwgY3JlYXRpb24gY29kZSwgaWYgYW55CgoKICBpZiAobW9kICYmIF8uaXNGdW5jdGlvbihtb2QuYWZ0ZXJNb2RlbENyZWF0ZSkpIHsKICAgIG1vZC5hZnRlck1vZGVsQ3JlYXRlKE1vZGVsLCBuYW1lKTsKICB9CgogIHJldHVybiBNb2RlbDsKfTsKCmV4cG9ydHMuQyA9IGZ1bmN0aW9uIChuYW1lLCBtb2RlbERlc2MsIG1vZGVsKSB7CiAgdmFyIGV4dGVuZE9iaiA9IHsKICAgIG1vZGVsOiBtb2RlbAogIH07CiAgdmFyIGNvbmZpZyA9IChtb2RlbCA/IG1vZGVsLnByb3RvdHlwZS5jb25maWcgOiB7fSkgfHwge307CiAgdmFyIG1vZDsKCiAgaWYgKGNvbmZpZy5hZGFwdGVyICYmIGNvbmZpZy5hZGFwdGVyLnR5cGUpIHsKICAgIG1vZCA9IHJlcXVpcmUoJy9hbGxveS9zeW5jLycgKyBjb25maWcuYWRhcHRlci50eXBlKTsKCiAgICBleHRlbmRPYmouc3luYyA9IGZ1bmN0aW9uIChtZXRob2QsIG1vZGVsLCBvcHRzKSB7CiAgICAgIHJldHVybiBtb2Quc3luYyhtZXRob2QsIG1vZGVsLCBvcHRzKTsKICAgIH07CiAgfSBlbHNlIHsKICAgIGV4dGVuZE9iai5zeW5jID0gZnVuY3Rpb24gKG1ldGhvZCwgbW9kZWwsIG9wdHMpIHsKICAgICAgVGkuQVBJLndhcm4oJ0V4ZWN1dGlvbiBvZiAnICsgbWV0aG9kICsgJyNzeW5jKCkgZnVuY3Rpb24gb24gYSBjb2xsZWN0aW9uIHRoYXQgZG9lcyBub3Qgc3VwcG9ydCBwZXJzaXN0ZW5jZScpOwogICAgICBUaS5BUEkud2FybignbW9kZWw6ICcgKyBKU09OLnN0cmluZ2lmeShtb2RlbC50b0pTT04oKSkpOwogICAgfTsKICB9CgogIHZhciBDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoZXh0ZW5kT2JqKTsKICBDb2xsZWN0aW9uLnByb3RvdHlwZS5jb25maWcgPSBjb25maWc7IC8vIGV4dGVuZCB0aGUgY29sbGVjdGlvbiBvYmplY3QKCiAgaWYgKF8uaXNGdW5jdGlvbihtb2RlbERlc2MuZXh0ZW5kQ29sbGVjdGlvbikpIHsKICAgIENvbGxlY3Rpb24gPSBtb2RlbERlc2MuZXh0ZW5kQ29sbGVjdGlvbihDb2xsZWN0aW9uKSB8fCBDb2xsZWN0aW9uOwogIH0gLy8gZG8gYW55IHBvc3QgY29sbGVjdGlvbiBjcmVhdGlvbiBjb2RlIGZvcm0gdGhlIHN5bmMgYWRhcHRlcgoKCiAgaWYgKG1vZCAmJiBfLmlzRnVuY3Rpb24obW9kLmFmdGVyQ29sbGVjdGlvbkNyZWF0ZSkpIHsKICAgIG1vZC5hZnRlckNvbGxlY3Rpb25DcmVhdGUoQ29sbGVjdGlvbik7CiAgfQoKICByZXR1cm4gQ29sbGVjdGlvbjsKfTsKCmV4cG9ydHMuVUkgPSB7fTsKCmV4cG9ydHMuVUkuY3JlYXRlID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIsIGFwaU5hbWUsIG9wdHMpIHsKICBvcHRzID0gb3B0cyB8fCB7fTsgLy8gTWFrZSBzdXJlIHdlIGhhdmUgYSBmdWxsIGFwaSBuYW1lCgogIHZhciBiYXNlTmFtZSwgbnM7CiAgdmFyIHBhcnRzID0gYXBpTmFtZS5zcGxpdCgnLicpOwoKICBpZiAocGFydHMubGVuZ3RoID09PSAxKSB7CiAgICBiYXNlTmFtZSA9IGFwaU5hbWU7CiAgICBucyA9IG9wdHMubnMgfHwgQ09OU1QuSU1QTElDSVRfTkFNRVNQQUNFU1tiYXNlTmFtZV0gfHwgQ09OU1QuTkFNRVNQQUNFX0RFRkFVTFQ7CiAgfSBlbHNlIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7CiAgICBiYXNlTmFtZSA9IHBhcnRzW3BhcnRzLmxlbmd0aCAtIDFdOwogICAgbnMgPSBwYXJ0cy5zbGljZSgwLCBwYXJ0cy5sZW5ndGggLSAxKS5qb2luKCcuJyk7CiAgfSBlbHNlIHsKICAgIHRocm93ICdBbGxveS5VSS5jcmVhdGUoKSBmYWlsZWQ6IE5vIEFQSSBuYW1lIHdhcyBnaXZlbiBpbiB0aGUgc2Vjb25kIHBhcmFtZXRlcic7CiAgfQoKICBvcHRzLmFwaU5hbWUgPSBucyArICcuJyArIGJhc2VOYW1lOwogIGJhc2VOYW1lID0gYmFzZU5hbWVbMF0udG9VcHBlckNhc2UoKSArIGJhc2VOYW1lLnN1YnN0cigxKTsgLy8gZ2VuZXJhdGUgdGhlIHN0eWxlIG9iamVjdAoKICB2YXIgc3R5bGUgPSBleHBvcnRzLmNyZWF0ZVN0eWxlKGNvbnRyb2xsZXIsIG9wdHMpOyAvLyBjcmVhdGUgdGhlIHRpdGFuaXVtIHByb3h5IG9iamVjdAoKICByZXR1cm4gZXZhbChucylbJ2NyZWF0ZScgKyBiYXNlTmFtZV0oc3R5bGUpOwp9OwoKZXhwb3J0cy5jcmVhdGVTdHlsZSA9IGZ1bmN0aW9uIChjb250cm9sbGVyLCBvcHRzLCBkZWZhdWx0cykgewogIHZhciBjbGFzc2VzLCBhcGlOYW1lOyAvLyBJZiB0aGVyZSdzIG5vIG9wdHMsIHRoZXJlJ3Mgbm8gcmVhc29uIHRvIGxvYWQgdGhlIHN0eWxlIG1vZHVsZS4gSnVzdAogIC8vIHJldHVybiBhbiBlbXB0eSBvYmplY3QuCgogIGlmICghb3B0cykgewogICAgcmV0dXJuIHt9OwogIH0gLy8gbWFrZSBvcHRzLmNsYXNzZXMgYW4gYXJyYXkgaWYgaXQgaXNuJ3QgYWxyZWFkeQoKCiAgaWYgKF8uaXNBcnJheShvcHRzLmNsYXNzZXMpKSB7CiAgICBjbGFzc2VzID0gb3B0cy5jbGFzc2VzLnNsaWNlKDApOwogIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhvcHRzLmNsYXNzZXMpKSB7CiAgICBjbGFzc2VzID0gb3B0cy5jbGFzc2VzLnNwbGl0KC9ccysvKTsKICB9IGVsc2UgewogICAgY2xhc3NlcyA9IFtdOwogIH0gLy8gZ2l2ZSBvcHRzLmFwaU5hbWUgYSBuYW1lc3BhY2UgaWYgaXQgZG9lc24ndCBoYXZlIG9uZSBhbHJlYWR5CgoKICBhcGlOYW1lID0gb3B0cy5hcGlOYW1lOwoKICBpZiAoYXBpTmFtZSAmJiBhcGlOYW1lLmluZGV4T2YoJy4nKSA9PT0gLTEpIHsKICAgIGFwaU5hbWUgPSBhZGROYW1lc3BhY2UoYXBpTmFtZSk7CiAgfSAvLyBUT0RPOiBjaGVjayBjYWNoZWQgc3R5bGVzIGJhc2VkIG9uIG9wdHMgYW5kIGNvbnRyb2xsZXIKICAvLyBMb2FkIHRoZSBydW50aW1lIHN0eWxlIGZvciB0aGUgZ2l2ZW4gY29udHJvbGxlcgoKCiAgdmFyIHN0eWxlQXJyYXk7CgogIGlmIChjb250cm9sbGVyICYmIF8uaXNPYmplY3QoY29udHJvbGxlcikpIHsKICAgIHN0eWxlQXJyYXkgPSByZXF1aXJlKCcvYWxsb3kvd2lkZ2V0cy8nICsgY29udHJvbGxlci53aWRnZXRJZCArICcvc3R5bGVzLycgKyBjb250cm9sbGVyLm5hbWUpOwogIH0gZWxzZSB7CiAgICBzdHlsZUFycmF5ID0gcmVxdWlyZSgnL2FsbG95L3N0eWxlcy8nICsgY29udHJvbGxlcik7CiAgfQoKICB2YXIgc3R5bGVGaW5hbCA9IHt9OyAvLyBpdGVyYXRlIHRocm91Z2ggYWxsIHN0eWxlcwoKICB2YXIgaSwgbGVuOwoKICBmb3IgKGkgPSAwLCBsZW4gPSBzdHlsZUFycmF5Lmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICB2YXIgc3R5bGUgPSBzdHlsZUFycmF5W2ldOyAvLyBnaXZlIHRoZSBhcGlOYW1lIGEgbmFtZXNwYWNlIGlmIG5lY2Vzc2FyeQoKICAgIHZhciBzdHlsZUFwaSA9IHN0eWxlLmtleTsKCiAgICBpZiAoc3R5bGUuaXNBcGkgJiYgc3R5bGVBcGkuaW5kZXhPZignLicpID09PSAtMSkgewogICAgICBzdHlsZUFwaSA9IChDT05TVC5JTVBMSUNJVF9OQU1FU1BBQ0VTW3N0eWxlQXBpXSB8fCBDT05TVC5OQU1FU1BBQ0VfREVGQVVMVCkgKyAnLicgKyBzdHlsZUFwaTsKICAgIH0gLy8gZG9lcyB0aGlzIHN0eWxlIG1hdGNoIHRoZSBnaXZlbiBvcHRzPwoKCiAgICBpZiAoc3R5bGUuaXNJZCAmJiBvcHRzLmlkICYmIHN0eWxlLmtleSA9PT0gb3B0cy5pZCB8fCBzdHlsZS5pc0NsYXNzICYmIF8uY29udGFpbnMoY2xhc3Nlcywgc3R5bGUua2V5KSkgey8vIGRvIG5vdGhpbmcgaGVyZSwga2VlcCBvbiBwcm9jZXNzaW5nCiAgICB9IGVsc2UgaWYgKHN0eWxlLmlzQXBpKSB7CiAgICAgIGlmIChzdHlsZS5rZXkuaW5kZXhPZignLicpID09PSAtMSkgewogICAgICAgIHN0eWxlLmtleSA9IGFkZE5hbWVzcGFjZShzdHlsZS5rZXkpOwogICAgICB9CgogICAgICBpZiAoc3R5bGUua2V5ICE9PSBhcGlOYW1lKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIC8vIG5vIG1hdGNoZXMsIHNraXAgdGhpcyBzdHlsZQogICAgICBjb250aW51ZTsKICAgIH0gLy8gY2FuIHdlIGNsZWFyIG91dCBhbnkgZm9ybSBmYWN0b3IgcXVlcmllcz8KCgogICAgaWYgKHN0eWxlLnF1ZXJpZXMgJiYgc3R5bGUucXVlcmllcy5mb3JtRmFjdG9yICYmICFleHBvcnRzW3N0eWxlLnF1ZXJpZXMuZm9ybUZhY3Rvcl0pIHsKICAgICAgY29udGludWU7CiAgICB9IC8vIHByb2Nlc3MgcnVudGltZSBjdXN0b20gcXVlcmllcwoKCiAgICBpZiAoc3R5bGUucXVlcmllcyAmJiBzdHlsZS5xdWVyaWVzLmlmICYmIChzdHlsZS5xdWVyaWVzLmlmLnRyaW0oKS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnIHx8IHN0eWxlLnF1ZXJpZXMuaWYuaW5kZXhPZignQWxsb3kuR2xvYmFscycpICE9PSAtMSAmJiBleHBvcnRzLkdsb2JhbHNbc3R5bGUucXVlcmllcy5pZi5zcGxpdCgnLicpWzJdXSA9PT0gZmFsc2UpKSB7CiAgICAgIGNvbnRpbnVlOwogICAgfSAvLyBNZXJnZSB0aGlzIHN0eWxlIGludG8gdGhlIGV4aXN0aW5nIHN0eWxlIG9iamVjdAoKCiAgICBleHBvcnRzLmRlZXBFeHRlbmQodHJ1ZSwgc3R5bGVGaW5hbCwgc3R5bGUuc3R5bGUpOwogIH0gLy8gVE9ETzogY2FjaGUgdGhlIHN0eWxlIGJhc2VkIG9uIHRoZSBvcHRzIGFuZCBjb250cm9sbGVyCiAgLy8gTWVyZ2UgcmVtYWluaW5nIGV4dHJhIHN0eWxlIHByb3BlcnRpZXMgZnJvbSBvcHRzLCBpZiBhbnkKCgogIHZhciBleHRyYVN0eWxlID0gXy5vbWl0KG9wdHMsIFtDT05TVC5DTEFTU19QUk9QRVJUWSwgQ09OU1QuQVBJTkFNRV9QUk9QRVJUWV0pOwoKICBleHBvcnRzLmRlZXBFeHRlbmQodHJ1ZSwgc3R5bGVGaW5hbCwgZXh0cmFTdHlsZSk7CiAgc3R5bGVGaW5hbFtDT05TVC5DTEFTU19QUk9QRVJUWV0gPSBjbGFzc2VzOwogIHN0eWxlRmluYWxbQ09OU1QuQVBJTkFNRV9QUk9QRVJUWV0gPSBhcGlOYW1lOwoKICBpZiAoTVczMjBfQ0hFQ0spIHsKICAgIGRlbGV0ZSBzdHlsZUZpbmFsW0NPTlNULkFQSU5BTUVfUFJPUEVSVFldOwogIH0KCiAgcmV0dXJuIGRlZmF1bHRzID8gXy5kZWZhdWx0cyhzdHlsZUZpbmFsLCBkZWZhdWx0cykgOiBzdHlsZUZpbmFsOwp9OwoKZnVuY3Rpb24gcHJvY2Vzc1N0eWxlKGNvbnRyb2xsZXIsIHByb3h5LCBjbGFzc2VzLCBvcHRzLCBkZWZhdWx0cykgewogIG9wdHMgPSBvcHRzIHx8IHt9OwogIG9wdHMuY2xhc3NlcyA9IGNsYXNzZXM7CgogIGlmIChwcm94eS5hcGlOYW1lKSB7CiAgICBvcHRzLmFwaU5hbWUgPSBwcm94eS5hcGlOYW1lOwogIH0KCiAgaWYgKHByb3h5LmlkKSB7CiAgICBvcHRzLmlkID0gcHJveHkuaWQ7CiAgfQoKICBwcm94eS5hcHBseVByb3BlcnRpZXMoZXhwb3J0cy5jcmVhdGVTdHlsZShjb250cm9sbGVyLCBvcHRzLCBkZWZhdWx0cykpOwoKICBpZiAodHJ1ZSkgewogICAgcHJveHkuY2xhc3NlcyA9IGNsYXNzZXM7CiAgfQp9CgpleHBvcnRzLmFkZENsYXNzID0gZnVuY3Rpb24gKGNvbnRyb2xsZXIsIHByb3h5LCBjbGFzc2VzLCBvcHRzKSB7CiAgLy8gbWFrZSBzdXJlIHdlIGFjdHVhbGx5IGhhdmUgY2xhc3NlcyB0byBhZGQKICBpZiAoIWNsYXNzZXMpIHsKICAgIGlmIChvcHRzKSB7CiAgICAgIGlmIChNVzMyMF9DSEVDSykgewogICAgICAgIGRlbGV0ZSBvcHRzLmFwaU5hbWU7CiAgICAgIH0KCiAgICAgIHByb3h5LmFwcGx5UHJvcGVydGllcyhvcHRzKTsKICAgIH0KCiAgICByZXR1cm47CiAgfSBlbHNlIHsKICAgIC8vIGNyZWF0ZSBhIHVuaW9uIG9mIHRoZSBleGlzdGluZyBjbGFzc2VzIHdpdGggdGhlIG5ldyBvbmUocykKICAgIHZhciBwQ2xhc3NlcyA9IHByb3h5W0NPTlNULkNMQVNTX1BST1BFUlRZXSB8fCBbXTsKICAgIHZhciBiZWZvcmVMZW4gPSBwQ2xhc3Nlcy5sZW5ndGg7CiAgICBjbGFzc2VzID0gXy5pc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoL1xzKy8pIDogY2xhc3NlczsKCiAgICB2YXIgbmV3Q2xhc3NlcyA9IF8udW5pb24ocENsYXNzZXMsIGNsYXNzZXMgfHwgW10pOyAvLyBtYWtlIHN1cmUgd2UgYWN0dWFsbHkgYWRkZWQgY2xhc3NlcyBiZWZvcmUgcHJvY2Vzc2luZyBzdHlsZXMKCgogICAgaWYgKGJlZm9yZUxlbiA9PT0gbmV3Q2xhc3Nlcy5sZW5ndGgpIHsKICAgICAgaWYgKG9wdHMpIHsKICAgICAgICBpZiAoTVczMjBfQ0hFQ0spIHsKICAgICAgICAgIGRlbGV0ZSBvcHRzLmFwaU5hbWU7CiAgICAgICAgfQoKICAgICAgICBwcm94eS5hcHBseVByb3BlcnRpZXMob3B0cyk7CiAgICAgIH0KCiAgICAgIHJldHVybjsKICAgIH0gZWxzZSB7CiAgICAgIHByb2Nlc3NTdHlsZShjb250cm9sbGVyLCBwcm94eSwgbmV3Q2xhc3Nlcywgb3B0cyk7CiAgICB9CiAgfQp9OwoKZXhwb3J0cy5yZW1vdmVDbGFzcyA9IGZ1bmN0aW9uIChjb250cm9sbGVyLCBwcm94eSwgY2xhc3Nlcywgb3B0cykgewogIGNsYXNzZXMgPSBjbGFzc2VzIHx8IFtdOwogIHZhciBwQ2xhc3NlcyA9IHByb3h5W0NPTlNULkNMQVNTX1BST1BFUlRZXSB8fCBbXTsKICB2YXIgYmVmb3JlTGVuID0gcENsYXNzZXMubGVuZ3RoOyAvLyBtYWtlIHN1cmUgdGhlcmUncyBjbGFzc2VzIHRvIHJlbW92ZSBiZWZvcmUgcHJvY2Vzc2luZwoKICBpZiAoIWJlZm9yZUxlbiB8fCAhY2xhc3Nlcy5sZW5ndGgpIHsKICAgIGlmIChvcHRzKSB7CiAgICAgIGlmIChNVzMyMF9DSEVDSykgewogICAgICAgIGRlbGV0ZSBvcHRzLmFwaU5hbWU7CiAgICAgIH0KCiAgICAgIHByb3h5LmFwcGx5UHJvcGVydGllcyhvcHRzKTsKICAgIH0KCiAgICByZXR1cm47CiAgfSBlbHNlIHsKICAgIC8vIHJlbW92ZSB0aGUgZ2l2ZW4gY2xhc3MoZXMpCiAgICBjbGFzc2VzID0gXy5pc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoL1xzKy8pIDogY2xhc3NlczsKCiAgICB2YXIgbmV3Q2xhc3NlcyA9IF8uZGlmZmVyZW5jZShwQ2xhc3NlcywgY2xhc3Nlcyk7IC8vIG1ha2Ugc3VyZSB0aGVyZSB3YXMgYWN0dWFsbHkgYSBkaWZmZXJlbmNlIGJlZm9yZSBwcm9jZXNzaW5nCgoKICAgIGlmIChiZWZvcmVMZW4gPT09IG5ld0NsYXNzZXMubGVuZ3RoKSB7CiAgICAgIGlmIChvcHRzKSB7CiAgICAgICAgaWYgKE1XMzIwX0NIRUNLKSB7CiAgICAgICAgICBkZWxldGUgb3B0cy5hcGlOYW1lOwogICAgICAgIH0KCiAgICAgICAgcHJveHkuYXBwbHlQcm9wZXJ0aWVzKG9wdHMpOwogICAgICB9CgogICAgICByZXR1cm47CiAgICB9IGVsc2UgewogICAgICBwcm9jZXNzU3R5bGUoY29udHJvbGxlciwgcHJveHksIG5ld0NsYXNzZXMsIG9wdHMsIFJFU0VUKTsKICAgIH0KICB9Cn07CgpleHBvcnRzLnJlc2V0Q2xhc3MgPSBmdW5jdGlvbiAoY29udHJvbGxlciwgcHJveHksIGNsYXNzZXMsIG9wdHMpIHsKICBjbGFzc2VzID0gY2xhc3NlcyB8fCBbXTsKICBjbGFzc2VzID0gXy5pc1N0cmluZyhjbGFzc2VzKSA/IGNsYXNzZXMuc3BsaXQoL1xzKy8pIDogY2xhc3NlczsKICBwcm9jZXNzU3R5bGUoY29udHJvbGxlciwgcHJveHksIGNsYXNzZXMsIG9wdHMsIFJFU0VUKTsKfTsKLyoqCiAqIEBtZXRob2QgY3JlYXRlV2lkZ2V0CiAqIEZhY3RvcnkgbWV0aG9kIGZvciBpbnN0YW50aWF0aW5nIGEgd2lkZ2V0IGNvbnRyb2xsZXIuIENyZWF0ZXMgYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgdGhlCiAqIG5hbWVkIHdpZGdldC4KICogQHBhcmFtIHtTdHJpbmd9IGlkIElkIG9mIHdpZGdldCB0byBpbnN0YW50aWF0ZS4KICogQHBhcmFtIHtTdHJpbmd9IFtuYW1lPSJ3aWRnZXQiXSBOYW1lIG9mIHRoZSB2aWV3IHdpdGhpbiB0aGUgd2lkZ2V0IHRvIGluc3RhbnRpYXRlICgnd2lkZ2V0JyBieSBkZWZhdWx0KQogKiBAcGFyYW0ge09iamVjdH0gW2FyZ3NdIEFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSB3aWRnZXQuCiAqIEByZXR1cm4ge0FsbG95LkNvbnRyb2xsZXJ9IEFsbG95IHdpZGdldCBjb250cm9sbGVyIG9iamVjdC4KICovCgoKZXhwb3J0cy5jcmVhdGVXaWRnZXQgPSBmdW5jdGlvbiAoaWQsIG5hbWUsIGFyZ3MpIHsKICBpZiAodHlwZW9mIG5hbWUgIT09ICd1bmRlZmluZWQnICYmIG5hbWUgIT09IG51bGwgJiYgXy5pc09iamVjdChuYW1lKSAmJiAhXy5pc1N0cmluZyhuYW1lKSkgewogICAgYXJncyA9IG5hbWU7CiAgICBuYW1lID0gREVGQVVMVF9XSURHRVQ7CiAgfQoKICByZXR1cm4gbmV3IChyZXF1aXJlKCcvYWxsb3kvd2lkZ2V0cy8nICsgaWQgKyAnL2NvbnRyb2xsZXJzLycgKyAobmFtZSB8fCBERUZBVUxUX1dJREdFVCkucmVwbGFjZSgvXlwuP1wvLywgJycpKS5kZWZhdWx0KShhcmdzKTsKfTsKLyoqCiAqIEBtZXRob2QgY3JlYXRlQ29udHJvbGxlcgogKiBGYWN0b3J5IG1ldGhvZCBmb3IgaW5zdGFudGlhdGluZyBhIGNvbnRyb2xsZXIuIENyZWF0ZXMgYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgdGhlCiAqIG5hbWVkIGNvbnRyb2xsZXIuCiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIE5hbWUgb2YgY29udHJvbGxlciB0byBpbnN0YW50aWF0ZS4KICogQHBhcmFtIHtPYmplY3R9IFthcmdzXSBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgY29udHJvbGxlci4KICogQHJldHVybiB7QWxsb3kuQ29udHJvbGxlcn0gQWxsb3kgY29udHJvbGxlciBvYmplY3QuCiAqLwoKCmV4cG9ydHMuY3JlYXRlQ29udHJvbGxlciA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7CiAgcmV0dXJuIG5ldyAocmVxdWlyZSgnL2FsbG95L2NvbnRyb2xsZXJzLycgKyBuYW1lLnJlcGxhY2UoL15cLj9cLy8sICcnKSkuZGVmYXVsdCkoYXJncyk7Cn07Ci8qKgogKiBAbWV0aG9kIGNyZWF0ZU1vZGVsCiAqIEZhY3RvcnkgbWV0aG9kIGZvciBpbnN0YW50aWF0aW5nIGEgQmFja2JvbmUgTW9kZWwgb2JqZWN0LiBDcmVhdGVzIGFuZCByZXR1cm5zIGFuIGluc3RhbmNlIG9mIHRoZQogKiBuYW1lZCBtb2RlbC4KICoKICogU2VlIFtCYWNrYm9uZS5Nb2RlbF0oaHR0cDovL2RvY3MuYXBwY2VsZXJhdG9yLmNvbS9iYWNrYm9uZS8wLjkuMi8jTW9kZWwpIGluIHRoZSBCYWNrYm9uZS5qcyBkb2N1bWVudGF0aW9uIGZvcgogKiBpbmZvcm1hdGlvbiBvbiB0aGUgbWV0aG9kcyBhbmQgcHJvcGVydGllcyBwcm92aWRlZCBieSB0aGUgTW9kZWwgb2JqZWN0LgogKiBAcGFyYW0ge1N0cmluZ30gbmFtZSBOYW1lIG9mIG1vZGVsIHRvIGluc3RhbnRpYXRlLgogKiBAcGFyYW0ge09iamVjdH0gW2FyZ3NdIEFyZ3VtZW50cyB0byBwYXNzIHRvIHRoZSBtb2RlbC4KICogQHJldHVybiB7QmFja2JvbmUuTW9kZWx9IEJhY2tib25lIG1vZGVsIG9iamVjdC4KICovCgoKZXhwb3J0cy5jcmVhdGVNb2RlbCA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7CiAgcmV0dXJuIG5ldyAocmVxdWlyZSgnL2FsbG95L21vZGVscy8nICsgbmFtZSkuTW9kZWwpKGFyZ3MpOwp9OwovKioKICogQG1ldGhvZCBjcmVhdGVDb2xsZWN0aW9uCiAqIEZhY3RvcnkgbWV0aG9kIGZvciBpbnN0YW50aWF0aW5nIGEgQmFja2JvbmUgY29sbGVjdGlvbiBvZiBtb2RlbCBvYmplY3RzLiBDcmVhdGVzIGFuZCByZXR1cm5zIGEKICogY29sbGVjdGlvbiBmb3IgaG9sZGluZyB0aGUgbmFtZWQgdHlwZSBvZiBtb2RlbCBvYmplY3RzLgogKgogKiBTZWUgW0JhY2tib25lLkNvbGxlY3Rpb25dKGh0dHA6Ly9kb2NzLmFwcGNlbGVyYXRvci5jb20vYmFja2JvbmUvMC45LjIvI0NvbGxlY3Rpb24pIGluIHRoZSBCYWNrYm9uZS5qcwogKiBkb2N1bWVudGF0aW9uIGZvciAgaW5mb3JtYXRpb24gb24gdGhlIG1ldGhvZHMgYW5kICBwcm9wZXJ0aWVzIHByb3ZpZGVkIGJ5IHRoZQogKiBDb2xsZWN0aW9uIG9iamVjdC4KICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgTmFtZSBvZiBtb2RlbCB0byBob2xkIGluIHRoaXMgY29sbGVjdGlvbi4KICogQHBhcmFtIHtPYmplY3R9IFthcmdzXSBBcmd1bWVudHMgdG8gcGFzcyB0byB0aGUgY29sbGVjdGlvbi4KICogQHJldHVybiB7QmFja2JvbmUuQ29sbGVjdGlvbn0gQmFja2JvbmUgY29sbGVjdGlvbiBvYmplY3QuCiAqLwoKCmV4cG9ydHMuY3JlYXRlQ29sbGVjdGlvbiA9IGZ1bmN0aW9uIChuYW1lLCBhcmdzKSB7CiAgcmV0dXJuIG5ldyAocmVxdWlyZSgnL2FsbG95L21vZGVscy8nICsgbmFtZSkuQ29sbGVjdGlvbikoYXJncyk7Cn07CgpmdW5jdGlvbiBpc1RhYmxldEZhbGxiYWNrKCkgewogIHJldHVybiBNYXRoLm1pbihUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybUhlaWdodCwgVGkuUGxhdGZvcm0uZGlzcGxheUNhcHMucGxhdGZvcm1XaWR0aCkgPj0gNzAwOwp9Ci8qKgogKiBAcHJvcGVydHkge0Jvb2xlYW59IGlzVGFibGV0CiAqIGB0cnVlYCBpZiB0aGUgY3VycmVudCBkZXZpY2UgaXMgYSB0YWJsZXQuCiAqCiAqLwoKCmV4cG9ydHMuaXNUYWJsZXQgPSBmdW5jdGlvbiAoKSB7CiAgaWYgKGZhbHNlKSB7CiAgICByZXR1cm4gImFuZHJvaWQiID09PSAnaXBhZCc7CiAgfSBlbHNlIGlmICh0cnVlKSB7CiAgICB2YXIgcHNjID0gVGkuUGxhdGZvcm0uQW5kcm9pZC5waHlzaWNhbFNpemVDYXRlZ29yeTsKICAgIHJldHVybiBwc2MgPT09IFRpLlBsYXRmb3JtLkFuZHJvaWQuUEhZU0lDQUxfU0laRV9DQVRFR09SWV9MQVJHRSB8fCBwc2MgPT09IFRpLlBsYXRmb3JtLkFuZHJvaWQuUEhZU0lDQUxfU0laRV9DQVRFR09SWV9YTEFSR0U7CiAgfSBlbHNlIGlmIChPU19NT0JJTEVXRUIpIHsKICAgIHJldHVybiBNYXRoLm1pbihUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybUhlaWdodCwgVGkuUGxhdGZvcm0uZGlzcGxheUNhcHMucGxhdGZvcm1XaWR0aCkgPj0gNDAwOyAvLyB9IGVsc2UgaWYgKE9TX0JMQUNLQkVSUlkpIHsKICAgIC8vIAkvLyBUYWJsZXRzIG5vdCBjdXJyZW50bHkgc3VwcG9ydGVkIGJ5IEJCIFRpU0RLCiAgICAvLyAJLy8gaHR0cHM6Ly9qaXJhLmFwcGNlbGVyYXRvci5vcmcvYnJvd3NlL1RJTU9CLTEzMjI1CiAgICAvLyAJcmV0dXJuIGZhbHNlOwogIH0gZWxzZSBpZiAoZmFsc2UpIHsKICAgIC8vIHBlciBodHRwOi8vd3d3LmV4dHJlbWV0ZWNoLmNvbS9jb21wdXRpbmcvMTM5NzY4LXdpbmRvd3MtOC1zbWFydHBob25lcy1hbmQtd2luZG93cy1waG9uZS04LXRhYmxldHMKICAgIC8vIHRhYmxldHMgc2hvdWxkIGJlID49IDEwMjR4NzY4IGFuZCBwaG9uZXMgY291bGQgYmUgbG93ZXIsIHRob3VnaCBjdXJyZW50IHBob25lcyBhcmUgcnVubmluZyBhdAogICAgLy8gdGhlIDEyODB4NzIwIHJhbmdlIGFuZCBoaWdoZXIKICAgIHJldHVybiBNYXRoLm1heChUaS5QbGF0Zm9ybS5kaXNwbGF5Q2Fwcy5wbGF0Zm9ybUhlaWdodCwgVGkuUGxhdGZvcm0uZGlzcGxheUNhcHMucGxhdGZvcm1XaWR0aCkgPj0gMTAyNDsKICB9IGVsc2UgewogICAgcmV0dXJuIGlzVGFibGV0RmFsbGJhY2soKTsKICB9Cn0oKTsKLyoqCiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gaXNIYW5kaGVsZAogKiBgdHJ1ZWAgaWYgdGhlIGN1cnJlbnQgZGV2aWNlIGlzIGEgaGFuZGhlbGQgZGV2aWNlIChub3QgYSB0YWJsZXQpLgogKgogKi8KCgpleHBvcnRzLmlzSGFuZGhlbGQgPSAhZXhwb3J0cy5pc1RhYmxldDsKLyoqCiAqIEBwcm9wZXJ0eSB7T2JqZWN0fSBHbG9iYWxzCiAqIEFuIG9iamVjdCBmb3Igc3RvcmluZyBnbG9iYWxseSBhY2Nlc3NpYmxlIHZhcmlhYmxlcyBhbmQgZnVuY3Rpb25zLgogKiBBbGxveS5HbG9iYWxzIGlzIGFjY2Vzc2libGUgaW4gYW55IGNvbnRyb2xsZXIgaW4geW91ciBhcHA6CiAqCiAqICAgICBBbGxveS5HbG9iYWxzLnNvbWVHbG9iYWxPYmplY3QgPSB7IGtleTogJ3ZhbHVlJyB9OwogKiAgICAgQWxsb3kuR2xvYmFscy5zb21lR2xvYmFsRnVuY3Rpb24gPSBmdW5jdGlvbigpe307CiAqCiAqIEFsbG95Lkdsb2JhbHMgY2FuIGJlIGFjY2Vzc2VkIGluIG90aGVyIG5vbi1jb250cm9sbGVyIEphdmFzY3JpcHQgZmlsZXMKICogbGlrZSB0aGlzOgogKgogKiAgICAgdmFyIHRoZU9iamVjdCA9IHJlcXVpcmUoJ2FsbG95JykuR2xvYmFscy5zb21lR2xvYmFsT2JqZWN0OwogKgogKi8KCmV4cG9ydHMuR2xvYmFscyA9IHt9OwovKioKICogQHByb3BlcnR5IHtPYmplY3R9IE1vZGVscwogKiBBbiBvYmplY3QgZm9yIHN0b3JpbmcgZ2xvYmFsbHkgYWNjZXNzaWJsZSBBbGxveSBtb2RlbHMuIFNpbmdsZXRvbiBtb2RlbHMKICogY3JlYXRlZCB2aWEgbWFya3VwIHdpbGwgYmUgc3RvcmVkIG9uIHRoaXMgb2JqZWN0LgogKgogKiAgICAgPE1vZGVsIHNyYz0ibXlNb2RlbCIvPgogKgogKiBUaGUgYWJvdmUgbWFya3VwIHdvdWxkIGVmZmVjdGl2ZWx5IGdlbmVyYXRlIHRoZSBmb2xsb3dpbmcgY29kZToKICoKICogICAgIEFsbG95Lk1vZGVscy5teU1vZGVsID0gQWxsb3kuY3JlYXRlTW9kZWwoJ015TW9kZWwnKTsKICoKICogQWxsb3kuTW9kZWxzLm15TW9kZWwgd291bGQgdGhlbiBiZSBhY2Nlc3NpYmxlIGluIGFueSBjb250cm9sbGVyIGluIHlvdXIgYXBwLgogKgogKi8KCmV4cG9ydHMuTW9kZWxzID0ge307Ci8qCiAqIENyZWF0ZXMgYSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgYSBNb2RlbCBiYXNlZCBvbiB0aGUgZ2l2ZW4gbW9kZWwsIG9yCiAqIHJldHVybnMgYW4gZXhpc3RpbmcgaW5zdGFuY2UgaWYgb25lIGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZC4KICogRG9jdW1lbnRlZCBpbiBkb2NzL2FwaWRvYy9tb2RlbC5qcyBmb3IgZG9jcyBzaXRlLgogKi8KCmV4cG9ydHMuTW9kZWxzLmluc3RhbmNlID0gZnVuY3Rpb24gKG5hbWUpIHsKICByZXR1cm4gZXhwb3J0cy5Nb2RlbHNbbmFtZV0gfHwgKGV4cG9ydHMuTW9kZWxzW25hbWVdID0gZXhwb3J0cy5jcmVhdGVNb2RlbChuYW1lKSk7Cn07Ci8qKgogKiBAcHJvcGVydHkge09iamVjdH0gQ29sbGVjdGlvbnMKICogQW4gb2JqZWN0IGZvciBzdG9yaW5nIGdsb2JhbGx5IGFjY2Vzc2libGUgQWxsb3kgY29sbGVjdGlvbnMuIFNpbmdsZXRvbiBjb2xsZWN0aW9ucwogKiBjcmVhdGVkIHZpYSBtYXJrdXAgd2lsbCBiZSBzdG9yZWQgb24gdGhpcyBvYmplY3QuCiAqCiAqICAgICA8Q29sbGVjdGlvbiBzcmM9Im15TW9kZWwiLz4KICoKICogVGhlIGFib3ZlIG1hcmt1cCB3b3VsZCBlZmZlY3RpdmVseSBnZW5lcmF0ZSB0aGUgZm9sbG93aW5nIGNvZGU6CiAqCiAqICAgICBBbGxveS5Db2xsZWN0aW9ucy5teU1vZGVsID0gQWxsb3kuY3JlYXRlQ29sbGVjdGlvbignTXlNb2RlbCcpOwogKgogKiBBbGxveS5Db2xsZWN0aW9ucy5teU1vZGVsIHdvdWxkIHRoZW4gYmUgYWNjZXNzaWJsZSBpbiBhbnkgY29udHJvbGxlciBpbiB5b3VyIGFwcC4KICoKICovCgoKZXhwb3J0cy5Db2xsZWN0aW9ucyA9IHt9OwovKgogKiBDcmVhdGVzIGEgc2luZ2xldG9uIGluc3RhbmNlIG9mIGEgQ29sbGVjdGlvbiBiYXNlZCBvbiB0aGUgZ2l2ZW4gbW9kZWwsIG9yCiAqIHJldHVybnMgYW4gZXhpc3RpbmcgaW5zdGFuY2UgaWYgb25lIGhhcyBhbHJlYWR5IGJlZW4gY3JlYXRlZC4KICogRG9jdW1lbnRlZCBpbiBkb2NzL2FwaWRvYy9jb2xsZWN0aW9uLmpzIGZvciBkb2NzIHNpdGUuCiAqLwoKZXhwb3J0cy5Db2xsZWN0aW9ucy5pbnN0YW5jZSA9IGZ1bmN0aW9uIChuYW1lKSB7CiAgcmV0dXJuIGV4cG9ydHMuQ29sbGVjdGlvbnNbbmFtZV0gfHwgKGV4cG9ydHMuQ29sbGVjdGlvbnNbbmFtZV0gPSBleHBvcnRzLmNyZWF0ZUNvbGxlY3Rpb24obmFtZSkpOwp9OwovKioKICogQHByb3BlcnR5IHtPYmplY3R9IENGRwogKiBBbiBvYmplY3QgdGhhdCBzdG9yZXMgQWxsb3kgY29uZmlndXJhdGlvbiB2YWx1ZXMgYXMgZGVmaW5lZCBpbiB5b3VyIGFwcCdzCiAqIGFwcC9jb25maWcuanNvbiBmaWxlLiBIZXJlJ3Mgd2hhdCBhIHR5cGljYWwgY29uZmlnLmpzb24gZmlsZSBtaWdodCBsb29rCiAqIGxpa2UgaW4gYW4gQWxsb3kgYXBwLgogKgogKiAgICAgewogKiAgICAgICAgICJnbG9iYWwiOiB7ICJrZXkiOiAiZGVmYXVsdFZhbHVlIiwgImFub3RoZXJLZXkiOiAxMjM0NSB9LAogKiAgICAgICAgICJlbnY6ZGV2ZWxvcG1lbnQiOiB7fSwKICogICAgICAgICAiZW52OnRlc3QiOiB7fSwKICogICAgICAgICAiZW52OnByb2R1Y3Rpb24iOiB7fSwKICogICAgICAgICAib3M6aW9zIjogeyAia2V5IjogImlvc1ZhbHVlIiB9LAogKiAgICAgICAgICJvczphbmRyb2lkIjogeyAia2V5IjogImFuZHJvaWRWYWx1ZSIgfSwKICogICAgICAgICAiZGVwZW5kZW5jaWVzIjoge30KICogICAgIH0KICoKICogSWYgdGhpcyBhcHAgd2FzIGNvbXBpbGVkIGZvciBpT1MsIHRoZSBBbGxveS5DRkcgd291bGQgbG9vayBsaWtlIHRoaXM6CiAqCiAqICAgICBBbGxveS5DRkcgPSB7CiAqICAgICAgICAgImtleSI6ICJpb3NWYWx1ZSIsCiAqICAgICAgICAgImFub3RoZXJLZXkiOiAxMjM0NQogKiAgICAgfQogKgogKiBBbGxveS5DRkcgaXMgYWNjZXNzaWJsZSBpbiBhbnkgY29udHJvbGxlciBpbiB5b3VyIGFwcCwgYW5kIGNhbiBiZSBhY2Nlc3NlZAogKiBpbiBvdGhlciBub24tY29udHJvbGxlciBKYXZhc2NyaXB0IGZpbGVzIGxpa2UgdGhpczoKICoKICogICAgIHZhciB0aGVLZXkgPSByZXF1aXJlKCdhbGxveScpLkNGRy5rZXk7CiAqCiAqLwoKCmV4cG9ydHMuQ0ZHID0gcmVxdWlyZSgnL2FsbG95L0NGRycpOwoKaWYgKHRydWUpIHsKICBleHBvcnRzLkFuZHJvaWQgPSB7fTsKICBleHBvcnRzLkFuZHJvaWQubWVudUl0ZW1DcmVhdGVBcmdzID0gWydpdGVtSWQnLCAnZ3JvdXBJZCcsICd0aXRsZScsICdvcmRlcicsICdhY3Rpb25WaWV3JywgJ2NoZWNrYWJsZScsICdjaGVja2VkJywgJ2VuYWJsZWQnLCAnaWNvbicsICdzaG93QXNBY3Rpb24nLCAndGl0bGVDb25kZW5zZWQnLCAndmlzaWJsZSddOwp9Ci8qCiAqIEFkYXB0ZWQgdmVyc2lvbiBvZiBub2RlLmV4dGVuZCBodHRwczovL3d3dy5ucG1qcy5vcmcvcGFja2FnZS9ub2RlLmV4dGVuZAogKgogKiBPcmlnaW5hbCBjb3B5cmlnaHQ6CiAqCiAqIG5vZGUuZXh0ZW5kCiAqIENvcHlyaWdodCAyMDExLCBKb2huIFJlc2lnCiAqIER1YWwgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBvciBHUEwgVmVyc2lvbiAyIGxpY2Vuc2VzLgogKiBodHRwOi8vanF1ZXJ5Lm9yZy9saWNlbnNlCiAqCiAqIEBmaWxlb3ZlcnZpZXcKICogUG9ydCBvZiBqUXVlcnkuZXh0ZW5kIHRoYXQgYWN0dWFsbHkgd29ya3Mgb24gbm9kZS5qcwogKi8KCgpleHBvcnRzLmRlZXBFeHRlbmQgPSBmdW5jdGlvbiAoKSB7CiAgdmFyIHRhcmdldCA9IGFyZ3VtZW50c1swXSB8fCB7fTsKICB2YXIgaSA9IDE7CiAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGg7CiAgdmFyIGRlZXAgPSBmYWxzZTsKICB2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5X2lzX2FycmF5LCBjbG9uZTsgLy8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvbgoKICBpZiAodHlwZW9mIHRhcmdldCA9PT0gJ2Jvb2xlYW4nKSB7CiAgICBkZWVwID0gdGFyZ2V0OwogICAgdGFyZ2V0ID0gYXJndW1lbnRzWzFdIHx8IHt9OyAvLyBza2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0CgogICAgaSA9IDI7CiAgfSAvLyBIYW5kbGUgY2FzZSB3aGVuIHRhcmdldCBpcyBhIHN0cmluZyBvciBzb21ldGhpbmcgKHBvc3NpYmxlIGluIGRlZXAgY29weSkKCgogIGlmICh0eXBlb2YgdGFyZ2V0ICE9PSAnb2JqZWN0JyAmJiAhXy5pc0Z1bmN0aW9uKHRhcmdldCkpIHsKICAgIHRhcmdldCA9IHt9OwogIH0KCiAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykgewogICAgLy8gT25seSBkZWFsIHdpdGggbm9uLW51bGwvdW5kZWZpbmVkIHZhbHVlcwogICAgb3B0aW9ucyA9IGFyZ3VtZW50c1tpXTsKCiAgICBpZiAob3B0aW9ucyAhPSBudWxsKSB7CiAgICAgIGlmICh0eXBlb2Ygb3B0aW9ucyA9PT0gJ3N0cmluZycpIHsKICAgICAgICBvcHRpb25zID0gb3B0aW9ucy5zcGxpdCgnJyk7CiAgICAgIH0gLy8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdAoKCiAgICAgIGZvciAobmFtZSBpbiBvcHRpb25zKSB7CiAgICAgICAgc3JjID0gdGFyZ2V0W25hbWVdOwogICAgICAgIGNvcHkgPSBvcHRpb25zW25hbWVdOyAvLyBQcmV2ZW50IG5ldmVyLWVuZGluZyBsb29wCgogICAgICAgIGlmICh0YXJnZXQgPT09IGNvcHkpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRlZXAgJiYgY29weSAmJiAhXy5pc0Z1bmN0aW9uKGNvcHkpICYmIF8uaXNPYmplY3QoY29weSkgJiYgKChjb3B5X2lzX2FycmF5ID0gXy5pc0FycmF5KGNvcHkpKSB8fCAhXy5oYXMoY29weSwgJ2FwaU5hbWUnKSkpIHsKICAgICAgICAgIC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5cwogICAgICAgICAgaWYgKGNvcHlfaXNfYXJyYXkpIHsKICAgICAgICAgICAgY29weV9pc19hcnJheSA9IGZhbHNlOwogICAgICAgICAgICBjbG9uZSA9IHNyYyAmJiBfLmlzQXJyYXkoc3JjKSA/IHNyYyA6IFtdOwogICAgICAgICAgfSBlbHNlIGlmIChfLmlzRGF0ZShjb3B5KSkgewogICAgICAgICAgICBjbG9uZSA9IG5ldyBEYXRlKGNvcHkudmFsdWVPZigpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNsb25lID0gc3JjICYmIF8uaXNPYmplY3Qoc3JjKSA/IHNyYyA6IHt9OwogICAgICAgICAgfSAvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW0KCgogICAgICAgICAgdGFyZ2V0W25hbWVdID0gZXhwb3J0cy5kZWVwRXh0ZW5kKGRlZXAsIGNsb25lLCBjb3B5KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGFyZ2V0W25hbWVdID0gY29weTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9IC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0CgoKICByZXR1cm4gdGFyZ2V0Owp9Ow=="},{"version":3,"sources":["/Users/ssaddique/Axway/KitchenSink-v2-update/kitchensink-v2/node_modules/alloy/Alloy/template/lib/alloy.js"],"names":["_","require","Backbone","CONST","exports","version","ALLOY_VERSION","DEFAULT_WIDGET","MW320_CHECK","OS_MOBILEWEB","IDENTITY_TRANSFORM","Ti","UI","createMatrix2D","create2DMatrix","undefined","RESET","bottom","left","right","top","height","width","shadowColor","shadowOffset","backgroundImage","backgroundRepeat","center","layout","backgroundSelectedColor","backgroundSelectedImage","opacity","touchEnabled","enabled","horizontalWrap","zIndex","backgroundColor","font","visible","color","transform","backgroundGradient","borderColor","borderRadius","borderWidth","extend","backgroundLeftCap","backgroundTopCap","backgroundDisabledColor","backgroundDisabledImage","backgroundFocusedColor","backgroundFocusedImage","focusable","keepScreenOn","ucfirst","text","toUpperCase","substr","addNamespace","apiName","IMPLICIT_NAMESPACES","NAMESPACE_DEFAULT","M","name","modelDesc","migrations","config","adapter","extendObj","extendClass","mod","type","sync","method","model","opts","API","warn","JSON","stringify","toJSON","defaults","isFunction","beforeModelCreate","Model","prototype","extendModel","afterModelCreate","C","Collection","extendCollection","afterCollectionCreate","create","controller","baseName","ns","parts","split","length","slice","join","style","createStyle","eval","classes","isArray","isString","indexOf","styleArray","isObject","widgetId","styleFinal","i","len","styleApi","key","isApi","isId","id","isClass","contains","queries","formFactor","if","trim","toLowerCase","Globals","deepExtend","extraStyle","omit","CLASS_PROPERTY","APINAME_PROPERTY","processStyle","proxy","applyProperties","addClass","pClasses","beforeLen","newClasses","union","removeClass","difference","resetClass","createWidget","args","replace","default","createController","createModel","createCollection","isTabletFallback","Math","min","Platform","displayCaps","platformHeight","platformWidth","isTablet","psc","Android","physicalSizeCategory","PHYSICAL_SIZE_CATEGORY_LARGE","PHYSICAL_SIZE_CATEGORY_XLARGE","max","isHandheld","Models","instance","Collections","CFG","menuItemCreateArgs","target","arguments","deep","options","src","copy","copy_is_array","clone","has","isDate","Date","valueOf"],"mappings":"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","sourcesContent":["/**\n * @class Alloy\n * Top-level module for Alloy functions.\n *\n * Alloy is an application framework built on top of the Titanium SDK designed to help rapidly\n * develop high quality applications and reduce maintenance.\n *\n * Alloy uses the model-view-controller architecture to separate the application into three\n * components:\n *\n *  * **Models** provide the data of the application. Alloy utilizes **Backbone Model and Collection**\n *     objects for this functionality.\n *\n *  * **Views** provide the UI components to interact with the application, written using **XML markup**\n *    and **Titanium Stylesheets (TSS)**, which abstracts the UI components of the Titanium API.\n *\n *  * **Controllers** provide the glue layer between the Model and View components as well as\n *    additional application logic using the **Alloy API** and **Titanium API**.\n *\n * The API documentation provided here is used with Alloy Controllers and Widget Controllers to\n * interact with the View and Model components of the application or widget.\n *\n * For guides on using Alloy, see\n * [Alloy Framework](http://docs.appcelerator.com/platform/latest/#!/guide/Alloy_Framework).\n */\nvar _ = require('/alloy/underscore')._,\n\tBackbone = require('/alloy/backbone'),\n\tCONST = require('/alloy/constants');\n\nexports.version = ALLOY_VERSION;\nexports._ = _;\nexports.Backbone = Backbone;\n\nvar DEFAULT_WIDGET = 'widget';\nvar MW320_CHECK = OS_MOBILEWEB;\nvar IDENTITY_TRANSFORM = OS_ANDROID ? (Ti.UI.createMatrix2D ? Ti.UI.createMatrix2D() : Ti.UI.create2DMatrix()) : undefined;\nvar RESET = {\n\tbottom: null,\n\tleft: null,\n\tright: null,\n\ttop: null,\n\theight: null,\n\twidth: null,\n\tshadowColor: null,\n\tshadowOffset: null,\n\tbackgroundImage: null,\n\tbackgroundRepeat: null,\n\tcenter: null,\n\tlayout: null,\n\tbackgroundSelectedColor: null,\n\tbackgroundSelectedImage: null,\n\n\t// non-null resets\n\topacity: 1.0,\n\ttouchEnabled: true,\n\tenabled: true,\n\thorizontalWrap: true,\n\tzIndex: 0,\n\n\t//##### DISPARITIES #####//\n\n\t// Setting to \"null\" on android works the first time. Leaves the color\n\t// on subsequent calls.\n\tbackgroundColor: OS_ANDROID ? 'transparent' : null,\n\n\t// creates a font slightly different (smaller) than default on iOS\n\t// https://jira.appcelerator.org/browse/TIMOB-14565\n\tfont: null,\n\n\t// Throws an exception on Android if set to null. Works on other platforms.\n\t// https://jira.appcelerator.org/browse/TIMOB-14566\n\tvisible: true,\n\n\t// Setting to \"null\" on android makes text transparent\n\t// https://jira.appcelerator.org/browse/TIMOB-14567\n\tcolor: OS_ANDROID ? '#000' : null,\n\n\t// Android will leave artifact of previous transform unless the identity matrix is\n\t// manually reset.\n\t// https://jira.appcelerator.org/browse/TIMOB-14568\n\t//\n\t// Mobileweb does not respect matrix properties set in the constructor, despite the\n\t// documentation at docs.appcelerator.com indicating that it should.\n\t// https://jira.appcelerator.org/browse/TIMOB-14570\n\ttransform: OS_ANDROID ? IDENTITY_TRANSFORM : null,\n\n\t// Crashes if set to null on anything but Android\n\t// https://jira.appcelerator.org/browse/TIMOB-14571\n\tbackgroundGradient: !OS_ANDROID ? {} : null,\n\n\t// All supported platforms have varying behavior with border properties\n\t// https://jira.appcelerator.org/browse/TIMOB-14573\n\tborderColor: OS_ANDROID ? null : 'transparent',\n\n\t// https://jira.appcelerator.org/browse/TIMOB-14575\n\tborderRadius: OS_IOS ? 0 : null,\n\n\t// https://jira.appcelerator.org/browse/TIMOB-14574\n\tborderWidth: OS_IOS ? 0 : null\n};\n\nif (OS_IOS) {\n\tRESET = _.extend(RESET, {\n\t\tbackgroundLeftCap: 0,\n\t\tbackgroundTopCap: 0\n\t});\n} else if (OS_ANDROID) {\n\tRESET = _.extend(RESET, {\n\t\tbackgroundDisabledColor: null,\n\t\tbackgroundDisabledImage: null,\n\t\tbackgroundFocusedColor: null,\n\t\tbackgroundFocusedImage: null,\n\t\tfocusable: false,\n\t\tkeepScreenOn: false\n\t});\n}\n\nfunction ucfirst(text) {\n\tif (!text) { return text; }\n\treturn text[0].toUpperCase() + text.substr(1);\n}\n\nfunction addNamespace(apiName) {\n\treturn (CONST.IMPLICIT_NAMESPACES[apiName] || CONST.NAMESPACE_DEFAULT) +\n\t\t'.' + apiName;\n}\n\nexports.M = function(name, modelDesc, migrations) {\n\tvar config = (modelDesc || {}).config || {};\n\tvar adapter = config.adapter || {};\n\tvar extendObj = {};\n\tvar extendClass = {};\n\tvar mod;\n\n\tif (adapter.type) {\n\t\tmod = require('/alloy/sync/' + adapter.type);\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\treturn mod.sync(method, model, opts);\n\t\t};\n\t} else {\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\tTi.API.warn('Execution of ' + method + '#sync() function on a model that does not support persistence');\n\t\t\tTi.API.warn('model: ' + JSON.stringify(model.toJSON()));\n\t\t};\n\t}\n\textendObj.defaults = config.defaults;\n\n\t// construct the model based on the current adapter type\n\tif (migrations) { extendClass.migrations = migrations; }\n\n\t// Run the pre model creation code, if any\n\tif (mod && _.isFunction(mod.beforeModelCreate)) {\n\t\tconfig = mod.beforeModelCreate(config, name) || config;\n\t}\n\n\t// Create the Model object\n\tvar Model = Backbone.Model.extend(extendObj, extendClass);\n\tModel.prototype.config = config;\n\n\t// Extend the Model with extendModel(), if defined\n\tif (_.isFunction(modelDesc.extendModel)) {\n\t\tModel = modelDesc.extendModel(Model) || Model;\n\t}\n\n\t// Run the post model creation code, if any\n\tif (mod && _.isFunction(mod.afterModelCreate)) {\n\t\tmod.afterModelCreate(Model, name);\n\t}\n\n\treturn Model;\n};\n\nexports.C = function(name, modelDesc, model) {\n\tvar extendObj = { model: model };\n\tvar config = (model ? model.prototype.config : {}) || {};\n\tvar mod;\n\n\tif (config.adapter && config.adapter.type) {\n\t\tmod = require('/alloy/sync/' + config.adapter.type);\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\treturn mod.sync(method, model, opts);\n\t\t};\n\t} else {\n\t\textendObj.sync = function(method, model, opts) {\n\t\t\tTi.API.warn('Execution of ' + method + '#sync() function on a collection that does not support persistence');\n\t\t\tTi.API.warn('model: ' + JSON.stringify(model.toJSON()));\n\t\t};\n\t}\n\n\tvar Collection = Backbone.Collection.extend(extendObj);\n\tCollection.prototype.config = config;\n\n\t// extend the collection object\n\tif (_.isFunction(modelDesc.extendCollection)) {\n\t\tCollection = modelDesc.extendCollection(Collection) || Collection;\n\t}\n\n\t// do any post collection creation code form the sync adapter\n\tif (mod && _.isFunction(mod.afterCollectionCreate)) {\n\t\tmod.afterCollectionCreate(Collection);\n\t}\n\n\treturn Collection;\n};\n\nexports.UI = {};\nexports.UI.create = function(controller, apiName, opts) {\n\topts = opts || {};\n\n\t// Make sure we have a full api name\n\tvar baseName, ns;\n\tvar parts = apiName.split('.');\n\tif (parts.length === 1) {\n\t\tbaseName = apiName;\n\t\tns = opts.ns || CONST.IMPLICIT_NAMESPACES[baseName] || CONST.NAMESPACE_DEFAULT;\n\t} else if (parts.length > 1) {\n\t\tbaseName = parts[parts.length - 1];\n\t\tns = parts.slice(0,parts.length - 1).join('.');\n\t} else {\n\t\tthrow ('Alloy.UI.create() failed: No API name was given in the second parameter');\n\t}\n\topts.apiName = ns + '.' + baseName;\n\tbaseName = baseName[0].toUpperCase() + baseName.substr(1);\n\n\t// generate the style object\n\tvar style = exports.createStyle(controller, opts);\n\n\t// create the titanium proxy object\n\treturn eval(ns)['create' + baseName](style);\n};\n\nexports.createStyle = function(controller, opts, defaults) {\n\tvar classes, apiName;\n\n\t// If there's no opts, there's no reason to load the style module. Just\n\t// return an empty object.\n\tif (!opts) { return {}; }\n\n\t// make opts.classes an array if it isn't already\n\tif (_.isArray(opts.classes)) {\n\t\tclasses = opts.classes.slice(0);\n\t} else if (_.isString(opts.classes)) {\n\t\tclasses = opts.classes.split(/\\s+/);\n\t} else {\n\t\tclasses = [];\n\t}\n\n\t// give opts.apiName a namespace if it doesn't have one already\n\tapiName = opts.apiName;\n\tif (apiName && apiName.indexOf('.') === -1) {\n\t\tapiName = addNamespace(apiName);\n\t}\n\n\t// TODO: check cached styles based on opts and controller\n\n\t// Load the runtime style for the given controller\n\tvar styleArray;\n\tif (controller && _.isObject(controller)) {\n\t\tstyleArray = require('/alloy/widgets/' + controller.widgetId +\n\t\t\t'/styles/' + controller.name);\n\t} else {\n\t\tstyleArray = require('/alloy/styles/' + controller);\n\t}\n\tvar styleFinal = {};\n\n\t// iterate through all styles\n\tvar i, len;\n\tfor (i = 0, len = styleArray.length; i < len; i++) {\n\t\tvar style = styleArray[i];\n\n\t\t// give the apiName a namespace if necessary\n\t\tvar styleApi = style.key;\n\t\tif (style.isApi && styleApi.indexOf('.') === -1) {\n\t\t\tstyleApi = (CONST.IMPLICIT_NAMESPACES[styleApi] ||\n\t\t\t\tCONST.NAMESPACE_DEFAULT) + '.' + styleApi;\n\t\t}\n\n\t\t// does this style match the given opts?\n\t\tif ((style.isId && opts.id && style.key === opts.id) ||\n\t\t\t(style.isClass && _.contains(classes, style.key))) {\n\t\t\t// do nothing here, keep on processing\n\t\t} else if (style.isApi) {\n\t\t\tif (style.key.indexOf('.') === -1) {\n\t\t\t\tstyle.key = addNamespace(style.key);\n\t\t\t}\n\t\t\tif (style.key !== apiName) { continue; }\n\t\t} else {\n\t\t\t// no matches, skip this style\n\t\t\tcontinue;\n\t\t}\n\n\t\t// can we clear out any form factor queries?\n\t\tif (style.queries && style.queries.formFactor &&\n\t\t\t!exports[style.queries.formFactor]) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// process runtime custom queries\n\t\tif (style.queries && style.queries.if &&\n\t\t\t(style.queries.if.trim().toLowerCase() === 'false' ||\n\t\t\t(style.queries.if.indexOf('Alloy.Globals') !== -1 &&\n\t\t\texports.Globals[style.queries.if.split('.')[2]] === false))) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Merge this style into the existing style object\n\t\texports.deepExtend(true, styleFinal, style.style);\n\t}\n\n\t// TODO: cache the style based on the opts and controller\n\n\t// Merge remaining extra style properties from opts, if any\n\tvar extraStyle = _.omit(opts, [\n\t\tCONST.CLASS_PROPERTY,\n\t\tCONST.APINAME_PROPERTY\n\t]);\n\texports.deepExtend(true, styleFinal, extraStyle);\n\tstyleFinal[CONST.CLASS_PROPERTY] = classes;\n\tstyleFinal[CONST.APINAME_PROPERTY] = apiName;\n\n\tif (MW320_CHECK) { delete styleFinal[CONST.APINAME_PROPERTY]; }\n\n\treturn defaults ? _.defaults(styleFinal, defaults) : styleFinal;\n};\n\nfunction processStyle(controller, proxy, classes, opts, defaults) {\n\topts = opts || {};\n\topts.classes = classes;\n\tif (proxy.apiName) { opts.apiName = proxy.apiName; }\n\tif (proxy.id) { opts.id = proxy.id; }\n\tproxy.applyProperties(exports.createStyle(controller, opts, defaults));\n\tif (OS_ANDROID) { proxy.classes = classes; }\n}\n\nexports.addClass = function(controller, proxy, classes, opts) {\n\n\t// make sure we actually have classes to add\n\tif (!classes) {\n\t\tif (opts) {\n\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\tproxy.applyProperties(opts);\n\t\t}\n\t\treturn;\n\t} else {\n\t\t// create a union of the existing classes with the new one(s)\n\t\tvar pClasses = proxy[CONST.CLASS_PROPERTY] || [];\n\t\tvar beforeLen = pClasses.length;\n\t\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\t\tvar newClasses = _.union(pClasses, classes || []);\n\n\t\t// make sure we actually added classes before processing styles\n\t\tif (beforeLen === newClasses.length) {\n\t\t\tif (opts) {\n\t\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\t\tproxy.applyProperties(opts);\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tprocessStyle(controller, proxy, newClasses, opts);\n\t\t}\n\t}\n};\n\nexports.removeClass = function(controller, proxy, classes, opts) {\n\tclasses = classes || [];\n\tvar pClasses = proxy[CONST.CLASS_PROPERTY] || [];\n\tvar beforeLen = pClasses.length;\n\n\t// make sure there's classes to remove before processing\n\tif (!beforeLen || !classes.length) {\n\t\tif (opts) {\n\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\tproxy.applyProperties(opts);\n\t\t}\n\t\treturn;\n\t} else {\n\t\t// remove the given class(es)\n\t\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\t\tvar newClasses = _.difference(pClasses, classes);\n\n\t\t// make sure there was actually a difference before processing\n\t\tif (beforeLen === newClasses.length) {\n\t\t\tif (opts) {\n\t\t\t\tif (MW320_CHECK) { delete opts.apiName; }\n\t\t\t\tproxy.applyProperties(opts);\n\t\t\t}\n\t\t\treturn;\n\t\t} else {\n\t\t\tprocessStyle(controller, proxy, newClasses, opts, RESET);\n\t\t}\n\t}\n};\n\nexports.resetClass = function(controller, proxy, classes, opts) {\n\tclasses = classes || [];\n\tclasses = _.isString(classes) ? classes.split(/\\s+/) : classes;\n\tprocessStyle(controller, proxy, classes, opts, RESET);\n};\n\n/**\n * @method createWidget\n * Factory method for instantiating a widget controller. Creates and returns an instance of the\n * named widget.\n * @param {String} id Id of widget to instantiate.\n * @param {String} [name=\"widget\"] Name of the view within the widget to instantiate ('widget' by default)\n * @param {Object} [args] Arguments to pass to the widget.\n * @return {Alloy.Controller} Alloy widget controller object.\n */\nexports.createWidget = function(id, name, args) {\n\tif (typeof name !== 'undefined' && name !== null &&\n\t\t_.isObject(name) && !_.isString(name)) {\n\t\targs = name;\n\t\tname = DEFAULT_WIDGET;\n\t}\n\treturn new (require('/alloy/widgets/' + id + '/controllers/' + (name || DEFAULT_WIDGET).replace(/^\\.?\\//, '')).default)(args);\n};\n\n/**\n * @method createController\n * Factory method for instantiating a controller. Creates and returns an instance of the\n * named controller.\n * @param {String} name Name of controller to instantiate.\n * @param {Object} [args] Arguments to pass to the controller.\n * @return {Alloy.Controller} Alloy controller object.\n */\nexports.createController = function(name, args) {\n\treturn new (require('/alloy/controllers/' + name.replace(/^\\.?\\//, '')).default)(args);\n};\n\n/**\n * @method createModel\n * Factory method for instantiating a Backbone Model object. Creates and returns an instance of the\n * named model.\n *\n * See [Backbone.Model](http://docs.appcelerator.com/backbone/0.9.2/#Model) in the Backbone.js documentation for\n * information on the methods and properties provided by the Model object.\n * @param {String} name Name of model to instantiate.\n * @param {Object} [args] Arguments to pass to the model.\n * @return {Backbone.Model} Backbone model object.\n */\nexports.createModel = function(name, args) {\n\treturn new (require('/alloy/models/' + name).Model)(args);\n};\n\n/**\n * @method createCollection\n * Factory method for instantiating a Backbone collection of model objects. Creates and returns a\n * collection for holding the named type of model objects.\n *\n * See [Backbone.Collection](http://docs.appcelerator.com/backbone/0.9.2/#Collection) in the Backbone.js\n * documentation for  information on the methods and  properties provided by the\n * Collection object.\n * @param {String} name Name of model to hold in this collection.\n * @param {Object} [args] Arguments to pass to the collection.\n * @return {Backbone.Collection} Backbone collection object.\n */\nexports.createCollection = function(name, args) {\n\treturn new (require('/alloy/models/' + name).Collection)(args);\n};\n\nfunction isTabletFallback() {\n\treturn Math.min(\n\t\tTi.Platform.displayCaps.platformHeight,\n\t\tTi.Platform.displayCaps.platformWidth\n\t) >= 700;\n}\n\n/**\n * @property {Boolean} isTablet\n * `true` if the current device is a tablet.\n *\n */\nexports.isTablet = (function() {\n\tif (OS_IOS) {\n\t\treturn Ti.Platform.osname === 'ipad';\n\t} else if (OS_ANDROID) {\n\t\tvar psc = Ti.Platform.Android.physicalSizeCategory;\n\t\treturn psc === Ti.Platform.Android.PHYSICAL_SIZE_CATEGORY_LARGE ||\n\t\t\tpsc === Ti.Platform.Android.PHYSICAL_SIZE_CATEGORY_XLARGE;\n\t} else if (OS_MOBILEWEB) {\n\t\treturn Math.min(\n\t\t\tTi.Platform.displayCaps.platformHeight,\n\t\t\tTi.Platform.displayCaps.platformWidth\n\t\t) >= 400;\n\t// } else if (OS_BLACKBERRY) {\n\t// \t// Tablets not currently supported by BB TiSDK\n\t// \t// https://jira.appcelerator.org/browse/TIMOB-13225\n\t// \treturn false;\n\t} else if (OS_WINDOWS) {\n\t\t// per http://www.extremetech.com/computing/139768-windows-8-smartphones-and-windows-phone-8-tablets\n\t\t// tablets should be >= 1024x768 and phones could be lower, though current phones are running at\n\t\t// the 1280x720 range and higher\n\t\treturn Math.max(\n\t\t\tTi.Platform.displayCaps.platformHeight,\n\t\t\tTi.Platform.displayCaps.platformWidth\n\t\t) >= 1024;\n\t} else {\n\t\treturn isTabletFallback();\n\t}\n})();\n\n/**\n * @property {Boolean} isHandheld\n * `true` if the current device is a handheld device (not a tablet).\n *\n */\nexports.isHandheld = !exports.isTablet;\n\n/**\n * @property {Object} Globals\n * An object for storing globally accessible variables and functions.\n * Alloy.Globals is accessible in any controller in your app:\n *\n *     Alloy.Globals.someGlobalObject = { key: 'value' };\n *     Alloy.Globals.someGlobalFunction = function(){};\n *\n * Alloy.Globals can be accessed in other non-controller Javascript files\n * like this:\n *\n *     var theObject = require('alloy').Globals.someGlobalObject;\n *\n */\nexports.Globals = {};\n\n/**\n * @property {Object} Models\n * An object for storing globally accessible Alloy models. Singleton models\n * created via markup will be stored on this object.\n *\n *     <Model src=\"myModel\"/>\n *\n * The above markup would effectively generate the following code:\n *\n *     Alloy.Models.myModel = Alloy.createModel('MyModel');\n *\n * Alloy.Models.myModel would then be accessible in any controller in your app.\n *\n */\nexports.Models = {};\n\n/*\n * Creates a singleton instance of a Model based on the given model, or\n * returns an existing instance if one has already been created.\n * Documented in docs/apidoc/model.js for docs site.\n */\nexports.Models.instance = function(name) {\n\treturn exports.Models[name] || (exports.Models[name] = exports.createModel(name));\n};\n\n/**\n * @property {Object} Collections\n * An object for storing globally accessible Alloy collections. Singleton collections\n * created via markup will be stored on this object.\n *\n *     <Collection src=\"myModel\"/>\n *\n * The above markup would effectively generate the following code:\n *\n *     Alloy.Collections.myModel = Alloy.createCollection('MyModel');\n *\n * Alloy.Collections.myModel would then be accessible in any controller in your app.\n *\n */\nexports.Collections = {};\n\n/*\n * Creates a singleton instance of a Collection based on the given model, or\n * returns an existing instance if one has already been created.\n * Documented in docs/apidoc/collection.js for docs site.\n */\nexports.Collections.instance = function(name) {\n\treturn exports.Collections[name] || (exports.Collections[name] = exports.createCollection(name));\n};\n\n/**\n * @property {Object} CFG\n * An object that stores Alloy configuration values as defined in your app's\n * app/config.json file. Here's what a typical config.json file might look\n * like in an Alloy app.\n *\n *     {\n *         \"global\": { \"key\": \"defaultValue\", \"anotherKey\": 12345 },\n *         \"env:development\": {},\n *         \"env:test\": {},\n *         \"env:production\": {},\n *         \"os:ios\": { \"key\": \"iosValue\" },\n *         \"os:android\": { \"key\": \"androidValue\" },\n *         \"dependencies\": {}\n *     }\n *\n * If this app was compiled for iOS, the Alloy.CFG would look like this:\n *\n *     Alloy.CFG = {\n *         \"key\": \"iosValue\",\n *         \"anotherKey\": 12345\n *     }\n *\n * Alloy.CFG is accessible in any controller in your app, and can be accessed\n * in other non-controller Javascript files like this:\n *\n *     var theKey = require('alloy').CFG.key;\n *\n */\nexports.CFG = require('/alloy/CFG');\n\nif (OS_ANDROID) {\n\texports.Android = {};\n\texports.Android.menuItemCreateArgs = ['itemId', 'groupId', 'title', 'order', 'actionView', 'checkable', 'checked', 'enabled', 'icon', 'showAsAction', 'titleCondensed', 'visible'];\n}\n\n/*\n * Adapted version of node.extend https://www.npmjs.org/package/node.extend\n *\n * Original copyright:\n *\n * node.extend\n * Copyright 2011, John Resig\n * Dual licensed under the MIT or GPL Version 2 licenses.\n * http://jquery.org/license\n *\n * @fileoverview\n * Port of jQuery.extend that actually works on node.js\n */\nexports.deepExtend = function() {\n\tvar target = arguments[0] || {};\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\tvar options, name, src, copy, copy_is_array, clone;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\n\t// Handle case when target is a string or something (possible in deep copy)\n\tif (typeof target !== 'object' && !_.isFunction(target)) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; i++) {\n\t\t// Only deal with non-null/undefined values\n\t\toptions = arguments[i];\n\t\tif (options != null) {\n\t\t\tif (typeof options === 'string') {\n\t\t\t\toptions = options.split('');\n\t\t\t}\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = target[name];\n\t\t\t\tcopy = options[name];\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target === copy) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (deep && copy && !_.isFunction(copy) && _.isObject(copy) && ((copy_is_array = _.isArray(copy)) || !_.has(copy, 'apiName'))) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (copy_is_array) {\n\t\t\t\t\t\tcopy_is_array = false;\n\t\t\t\t\t\tclone = src && _.isArray(src) ? src : [];\n\t\t\t\t\t} else if (_.isDate(copy)) {\n\t\t\t\t\t\tclone = new Date(copy.valueOf());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tclone = src && _.isObject(src) ? src : {};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\ttarget[name] = exports.deepExtend(deep, clone, copy);\n\t\t\t\t} else {\n\t\t\t\t\ttarget[name] = copy;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n"]}]}